<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>กล่องข้อความ - Voice for Change</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    @font-face {
      font-family: 'Google Sans';
      src: url('../Google_Sans/static/GoogleSans-Regular.ttf') format('truetype');
      font-weight: 400;
      font-style: normal;
    }
    @font-face {
      font-family: 'Google Sans';
      src: url('../Google_Sans/static/GoogleSans-Medium.ttf') format('truetype');
      font-weight: 500;
      font-style: normal;
    }
    @font-face {
      font-family: 'Google Sans';
      src: url('../Google_Sans/static/GoogleSans-SemiBold.ttf') format('truetype');
      font-weight: 600;
      font-style: normal;
    }
    @font-face {
      font-family: 'Google Sans';
      src: url('../Google_Sans/static/GoogleSans-Bold.ttf') format('truetype');
      font-weight: 700;
      font-style: normal;
    }
    * { font-family: 'Google Sans', sans-serif; }
    .sidebar-item:hover { background: rgba(59, 130, 246, 0.1); }
    .sidebar-item.active { background: rgba(59, 130, 246, 0.15); color: #2563eb; }
    .message-row:hover { background: #f8fafc; }
    .message-row.unread { background: #eff6ff; font-weight: 500; }
    .badge { font-size: 10px; padding: 2px 6px; border-radius: 9999px; }
  </style>
</head>
<body class="bg-gray-100 h-screen flex flex-col">

  <!-- Top Navigation -->
  <nav class="bg-blue-600 text-white px-4 py-2 flex items-center justify-between">
    <div class="flex items-center gap-4">
      <button class="p-1 hover:bg-blue-500 rounded">
        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"/>
        </svg>
      </button>
      <h1 class="font-semibold text-lg">Voice for Change</h1>
    </div>
    <div class="flex items-center gap-4">
      <span class="text-sm" id="user-info">พนักงาน: 05318</span>
      <button onclick="logout()" class="text-sm bg-blue-500 hover:bg-blue-400 px-3 py-1 rounded transition">
        ออกจากระบบ
      </button>
    </div>
  </nav>

  </div>

  <!-- Main Content -->
  <div class="flex flex-1 overflow-hidden">
    
    <!-- Sidebar -->
    <div class="w-64 bg-white border-r border-gray-200 flex flex-col">
      <!-- Sidebar Tabs -->
      <div class="border-b border-gray-200">
        <div class="flex">
          <button class="flex-1 px-3 py-2 text-xs text-gray-500 hover:bg-gray-50 border-b-2 border-transparent">ไฟล์</button>
          <button class="flex-1 px-3 py-2 text-xs text-blue-600 font-medium border-b-2 border-blue-600 bg-blue-50">หน้าแรก</button>
          <button class="flex-1 px-3 py-2 text-xs text-gray-500 hover:bg-gray-50 border-b-2 border-transparent">ความช่วยเหลือ</button>
        </div>
      </div>

      <div class="p-4">
        <button class="w-full bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 transition flex items-center justify-center gap-2">
          <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"/>
          </svg>
          สร้างข้อความใหม่
        </button>
      </div>
      
      <div class="flex-1 overflow-auto">
        <div class="px-2">
          <p class="text-xs text-gray-400 px-3 py-2 uppercase">โฟลเดอร์</p>
          
          <div class="sidebar-item active flex items-center gap-3 px-3 py-2 rounded-lg cursor-pointer">
            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"/>
            </svg>
            <span>กล่องข้อความ</span>
            <span class="ml-auto bg-blue-600 text-white badge">12</span>
          </div>
          
          <div class="sidebar-item flex items-center gap-3 px-3 py-2 rounded-lg cursor-pointer text-gray-600" onclick="filterMessages('complaint')">
            <svg class="w-5 h-5 text-red-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"/>
            </svg>
            <span>ร้องเรียน</span>
            <span class="ml-auto bg-red-100 text-red-600 badge">5</span>
          </div>
          
          <div class="sidebar-item flex items-center gap-3 px-3 py-2 rounded-lg cursor-pointer text-gray-600" onclick="filterMessages('suggestion')">
            <svg class="w-5 h-5 text-blue-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"/>
            </svg>
            <span>ข้อเสนอแนะ</span>
            <span class="ml-auto bg-blue-100 text-blue-600 badge">4</span>
          </div>
          
          <div class="sidebar-item flex items-center gap-3 px-3 py-2 rounded-lg cursor-pointer text-gray-600" onclick="filterMessages('compliment')">
            <svg class="w-5 h-5 text-emerald-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M9 12l2 2 4-4M7.835 4.697a3.42 3.42 0 001.946-.806 3.42 3.42 0 014.438 0 3.42 3.42 0 001.946.806 3.42 3.42 0 013.138 3.138 3.42 3.42 0 00.806 1.946 3.42 3.42 0 010 4.438 3.42 3.42 0 00-.806 1.946 3.42 3.42 0 01-3.138 3.138 3.42 3.42 0 00-1.946.806 3.42 3.42 0 01-4.438 0 3.42 3.42 0 00-1.946-.806 3.42 3.42 0 01-3.138-3.138 3.42 3.42 0 00-.806-1.946 3.42 3.42 0 010-4.438 3.42 3.42 0 00.806-1.946 3.42 3.42 0 013.138-3.138z"/>
            </svg>
            <span>ชมเชย</span>
            <span class="ml-auto bg-emerald-100 text-emerald-600 badge">3</span>
          </div>

          <div class="border-t border-gray-200 my-3"></div>
          
          <div class="sidebar-item flex items-center gap-3 px-3 py-2 rounded-lg cursor-pointer text-gray-600">
            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M5 8h14M5 8a2 2 0 110-4h14a2 2 0 110 4M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8m-9 4h4"/>
            </svg>
            <span>เก็บถาวร</span>
          </div>
          
          <div class="sidebar-item flex items-center gap-3 px-3 py-2 rounded-lg cursor-pointer text-gray-600">
            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"/>
            </svg>
            <span>ถังขยะ</span>
          </div>
        </div>
      </div>
    </div>

    <!-- Message List -->
    <div class="flex-1 flex flex-col bg-white">
      <!-- Toolbar -->
      <div class="border-b border-gray-200 px-4 py-2 flex items-center gap-4">
        <input type="checkbox" class="w-4 h-4">
        <button class="p-2 hover:bg-gray-100 rounded">
          <svg class="w-5 h-5 text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"/>
          </svg>
        </button>
        <div class="flex-1">
          <input type="text" placeholder="ค้นหาข้อความ..." class="w-full max-w-md px-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
        </div>
      </div>

      <!-- Messages -->
      <div class="flex-1 overflow-auto">
        <table class="w-full">
          <tbody id="message-list">
            <!-- Messages will be inserted here -->
          </tbody>
        </table>
      </div>
    </div>

    <!-- Message Preview -->
    <div class="w-96 border-l border-gray-200 bg-white p-4 hidden lg:block" id="preview-panel">
      <div class="text-center text-gray-400 mt-20">
        <svg class="w-16 h-16 mx-auto mb-4 text-gray-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"/>
        </svg>
        <p>เลือกข้อความเพื่อดูรายละเอียด</p>
      </div>
    </div>

  </div>

  <script>
    // Check login
    if (!localStorage.getItem('isLoggedIn')) {
      window.location.href = 'login.html';
    }
    
    // Display user info
    const employeeId = localStorage.getItem('employeeId');
    if (employeeId) {
      document.getElementById('user-info').textContent = 'พนักงาน: ' + employeeId;
    }

    // Sample messages
    const messages = [
      { id: 1, type: 'complaint', from: 'พนักงาน 12345', subject: 'ปัญหาเรื่องแอร์ในออฟฟิศไม่เย็น', date: '20 ม.ค. 69', time: '14:30', unread: true, status: 'รอดำเนินการ' },
      { id: 2, type: 'suggestion', from: 'พนักงาน 23456', subject: 'เสนอให้มีห้องพักผ่อนสำหรับพนักงาน', date: '20 ม.ค. 69', time: '13:15', unread: true, status: 'กำลังพิจารณา' },
      { id: 3, type: 'compliment', from: 'พนักงาน 34567', subject: 'ขอชมเชยทีม IT ที่ช่วยเหลือดีมาก', date: '20 ม.ค. 69', time: '11:00', unread: false, status: 'ส่งต่อแล้ว' },
      { id: 4, type: 'complaint', from: 'พนักงาน 45678', subject: 'ปัญหาที่จอดรถไม่เพียงพอ', date: '19 ม.ค. 69', time: '16:45', unread: true, status: 'รอดำเนินการ' },
      { id: 5, type: 'suggestion', from: 'พนักงาน 56789', subject: 'เสนอจัดกิจกรรม Team Building', date: '19 ม.ค. 69', time: '10:30', unread: false, status: 'อนุมัติแล้ว' },
      { id: 6, type: 'complaint', from: 'พนักงาน 67890', subject: 'เรื่องอาหารกลางวันในโรงอาหาร', date: '18 ม.ค. 69', time: '12:00', unread: false, status: 'แก้ไขแล้ว' },
      { id: 7, type: 'compliment', from: 'พนักงาน 78901', subject: 'ขอบคุณฝ่าย HR สำหรับการจัดงานปีใหม่', date: '18 ม.ค. 69', time: '09:00', unread: false, status: 'รับทราบ' },
      { id: 8, type: 'suggestion', from: 'พนักงาน 89012', subject: 'เสนอให้มี Work from Home', date: '17 ม.ค. 69', time: '15:20', unread: false, status: 'กำลังพิจารณา' },
    ];

    function getTypeColor(type) {
      switch(type) {
        case 'complaint': return 'bg-red-100 text-red-600';
        case 'suggestion': return 'bg-blue-100 text-blue-600';
        case 'compliment': return 'bg-emerald-100 text-emerald-600';
        default: return 'bg-gray-100 text-gray-600';
      }
    }

    function getTypeName(type) {
      switch(type) {
        case 'complaint': return 'ร้องเรียน';
        case 'suggestion': return 'ข้อเสนอแนะ';
        case 'compliment': return 'ชมเชย';
        default: return '';
      }
    }

    function renderMessages(filter = null) {
      const list = document.getElementById('message-list');
      const filtered = filter ? messages.filter(m => m.type === filter) : messages;
      
      list.innerHTML = filtered.map(msg => `
        <tr class="message-row ${msg.unread ? 'unread' : ''} border-b border-gray-100 cursor-pointer" onclick="viewMessage(${msg.id})">
          <td class="px-4 py-3 w-10">
            <input type="checkbox" class="w-4 h-4" onclick="event.stopPropagation()">
          </td>
          <td class="px-2 py-3 w-10">
            <svg class="w-5 h-5 text-gray-300 hover:text-yellow-400 cursor-pointer" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"/>
            </svg>
          </td>
          <td class="py-3 w-32">
            <span class="badge ${getTypeColor(msg.type)}">${getTypeName(msg.type)}</span>
          </td>
          <td class="py-3 w-40 text-sm text-gray-600">${msg.from}</td>
          <td class="py-3 text-sm">
            <span class="${msg.unread ? 'font-semibold text-gray-800' : 'text-gray-600'}">${msg.subject}</span>
          </td>
          <td class="px-4 py-3 w-24 text-right text-xs text-gray-400">${msg.date}</td>
        </tr>
      `).join('');
    }

    function viewMessage(id) {
      const msg = messages.find(m => m.id === id);
      const preview = document.getElementById('preview-panel');
      
      preview.innerHTML = `
        <div class="mb-4">
          <span class="badge ${getTypeColor(msg.type)}">${getTypeName(msg.type)}</span>
          <span class="badge bg-gray-100 text-gray-600 ml-2">${msg.status}</span>
        </div>
        <h2 class="text-lg font-semibold text-gray-800 mb-2">${msg.subject}</h2>
        <div class="flex items-center gap-2 text-sm text-gray-500 mb-4">
          <span>${msg.from}</span>
          <span>•</span>
          <span>${msg.date} ${msg.time}</span>
        </div>
        <div class="border-t pt-4">
          <p class="text-gray-600 text-sm leading-relaxed">
            รายละเอียดข้อความจะแสดงที่นี่...
          </p>
        </div>
        <div class="mt-6 flex gap-2">
          <button class="flex-1 bg-blue-600 text-white py-2 rounded-lg hover:bg-blue-700 transition text-sm">ตอบกลับ</button>
          <button class="px-4 py-2 border border-gray-200 rounded-lg hover:bg-gray-50 transition text-sm">เก็บถาวร</button>
        </div>
      `;
      
      // Mark as read
      msg.unread = false;
      renderMessages();
    }

    function filterMessages(type) {
      renderMessages(type);
    }

    function logout() {
      localStorage.removeItem('isLoggedIn');
      localStorage.removeItem('employeeId');
      window.location.href = 'login.html';
    }

    // Initial render
    renderMessages();
  </script>

</body>
</html>
