<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>คำนวณภาษี - Tax Calculator</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Fonts CSS -->
    <link rel="stylesheet" href="../../function/fonts.css">
    
    <style>
        /* Consistent form field spacing */
        .deduction-card label {
            display: flex !important;
            align-items: center;
            gap: 4px;
            min-height: 20px;
            line-height: 1.25;
            margin-bottom: 8px !important;
        }
        /* Reset Tailwind space-y-4 and apply consistent spacing */
        .deduction-card .space-y-4 > * + * {
            margin-top: 16px !important;
        }
        .deduction-card .space-y-4 > *:first-child {
            margin-top: 0 !important;
        }
        /* Fix tooltip icon alignment */
        .deduction-card label svg {
            flex-shrink: 0;
        }
    </style>
</head>
<body class="bg-gray-50 min-h-screen">
    
    <!-- Navbar -->
    <nav class="fixed top-0 left-0 right-0 z-50 h-16 bg-white/70 backdrop-blur-xl border-b border-gray-100/50">
        <div class="w-full px-4 h-full flex items-center justify-between">
            <!-- Left Side: Back Button (Mobile) / Logo + Menu (Desktop) -->
            <div class="flex items-center gap-4">
                <!-- Back Button (Mobile only) -->
                <a href="tax-home.html" class="lg:hidden w-10 h-10 flex items-center justify-center rounded-lg hover:bg-gray-100 transition-colors">
                    <svg class="w-6 h-6 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
                    </svg>
                </a>
                
                <!-- Logo (Desktop only) -->
                <img src="../../function/logo/Pattaya Aviation.png" alt="Logo" class="hidden lg:block h-10 object-contain">
                
                <!-- Desktop: Inline Menu (Next to Logo) -->
                <div class="hidden lg:flex items-center gap-1">
                <a href="../Home/pa-system.html" class="flex items-center gap-2 px-4 py-2 hover:bg-gray-100 rounded-lg transition-colors">
                    <svg class="w-5 h-5 text-blue-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"></path>
                    </svg>
                    <span class="text-gray-700 font-medium">หน้าหลัก</span>
                </a>
                
                <!-- Voice for Change with Dropdown -->
                <div class="relative group">
                    <a href="../vfc/vfc-home.html" class="flex items-center gap-2 px-4 py-2 hover:bg-gray-100 rounded-lg transition-colors">
                        <svg class="w-5 h-5 text-cyan-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z"></path>
                        </svg>
                        <span class="text-gray-700 font-medium">Voice for Change</span>
                        <svg class="w-4 h-4 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                        </svg>
                    </a>
                    <!-- Dropdown Submenu -->
                    <div class="invisible group-hover:visible opacity-0 group-hover:opacity-100 absolute top-full left-0 mt-1 w-56 bg-white rounded-xl shadow-lg border border-gray-100 py-2 transition-all duration-200 z-50">
                        <a href="../vfc/complaint.html" class="flex items-center gap-3 px-4 py-2.5 hover:bg-gray-50 transition-colors">
                            <svg class="w-5 h-5 text-red-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path>
                            </svg>
                            <span class="text-gray-700">ร้องเรียน</span>
                        </a>
                        <a href="../vfc/compliment.html" class="flex items-center gap-3 px-4 py-2.5 hover:bg-gray-50 transition-colors">
                            <svg class="w-5 h-5 text-green-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"></path>
                            </svg>
                            <span class="text-gray-700">ชมเชย</span>
                        </a>
                        <a href="../vfc/suggestion.html" class="flex items-center gap-3 px-4 py-2.5 hover:bg-gray-50 transition-colors">
                            <svg class="w-5 h-5 text-blue-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"></path>
                            </svg>
                            <span class="text-gray-700">เสนอแนะ</span>
                        </a>
                        <div class="h-px bg-gray-100 my-1"></div>
                        <a href="../vfc/track.html" class="flex items-center gap-3 px-4 py-2.5 hover:bg-gray-50 transition-colors">
                            <svg class="w-5 h-5 text-purple-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"></path>
                            </svg>
                            <span class="text-gray-700">ติดตามคำร้อง</span>
                        </a>
                    </div>
                </div>
                
                <!-- Tax with Dropdown -->
                <div class="relative group">
                    <a href="tax-home.html" class="flex items-center gap-2 px-4 py-2 hover:bg-gray-100 rounded-lg transition-colors">
                        <svg class="w-5 h-5 text-indigo-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
                        </svg>
                        <span class="text-gray-700 font-medium">ภาษี</span>
                        <svg class="w-4 h-4 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                        </svg>
                    </a>
                    <!-- Dropdown Submenu -->
                    <div class="invisible group-hover:visible opacity-0 group-hover:opacity-100 absolute top-full left-0 mt-1 w-56 bg-white rounded-xl shadow-lg border border-gray-100 py-2 transition-all duration-200 z-50">
                        <a href="tax-calculator.html" class="flex items-center gap-3 px-4 py-2.5 hover:bg-gray-50 transition-colors">
                            <svg class="w-5 h-5 text-emerald-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z"></path>
                            </svg>
                            <span class="text-gray-700">คำนวณภาษี</span>
                        </a>
                        <a href="pa-ly01.html" class="flex items-center gap-3 px-4 py-2.5 hover:bg-gray-50 transition-colors">
                            <svg class="w-5 h-5 text-amber-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
                            </svg>
                            <span class="text-gray-700">ลดหย่อนภาษี (ล.ย.01)</span>
                        </a>
                    </div>
                </div>
                </div>
            </div>
            
            <!-- Right Side: Hamburger Button (Mobile only) -->
            <button onclick="document.getElementById('dropdownMenu').classList.toggle('hidden')" class="lg:hidden w-10 h-10 flex items-center justify-center rounded-lg hover:bg-gray-100 transition-colors">
                <svg class="w-6 h-6 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
                </svg>
            </button>
        </div>
        
        <!-- Mobile: Dropdown Menu -->
        <div id="dropdownMenu" class="hidden lg:hidden absolute top-16 left-0 right-0 z-[100] bg-white border-b border-gray-200 shadow-lg py-2 max-h-[calc(100vh-4rem)] overflow-y-auto">
            <div class="flex flex-col">
                <a href="../Home/pa-system.html" class="flex items-center gap-3 px-6 py-3 hover:bg-gray-50">
                    <svg class="w-5 h-5 text-blue-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"></path>
                    </svg>
                    <span class="text-gray-800">หน้าหลัก</span>
                </a>
                <a href="../vfc/vfc-home.html" class="flex items-center gap-3 px-6 py-3 hover:bg-gray-50">
                    <svg class="w-5 h-5 text-cyan-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z"></path>
                    </svg>
                    <span class="text-gray-800">Voice for Change</span>
                </a>
                <a href="tax-home.html" class="flex items-center gap-3 px-6 py-3 hover:bg-gray-50">
                    <svg class="w-5 h-5 text-indigo-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
                    </svg>
                    <span class="text-gray-800">ภาษี</span>
                </a>
            </div>
        </div>
    </nav>
    
    <!-- Main Content -->
    <main class="pt-20 pb-8 px-4 lg:px-8 max-w-7xl mx-auto">
        
        <!-- Header -->
        <div class="mb-8">
            <div class="flex items-center gap-4 mb-4">
                <div class="w-14 h-14 bg-emerald-100 rounded-2xl flex items-center justify-center">
                    <svg class="w-7 h-7 text-emerald-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z"/>
                    </svg>
                </div>
                <div>
                    <h1 class="text-2xl font-bold text-gray-900">คำนวณภาษี</h1>
                    <p class="text-gray-500 text-sm">คำนวณภาษีเงินได้บุคคลธรรมดา</p>
                </div>
            </div>
        </div>
        
        <!-- Income Section Card -->
        <div class="bg-white rounded-3xl shadow-lg p-6 lg:p-8 mb-6">
            <h2 class="text-lg font-semibold text-emerald-600 mb-4">รายได้</h2>
            
            <div class="grid grid-cols-1 lg:grid-cols-3 gap-4">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">เงินเดือน (ต่อปี)</label>
                    <div class="relative">
                        <input type="number" id="salary" class="w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-emerald-500 focus:border-transparent transition-all" >
                        <span class="absolute right-4 top-1/2 -translate-y-1/2 text-gray-400">บาท</span>
                    </div>
                </div>
                
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">โบนัส (ต่อปี)</label>
                    <div class="relative">
                        <input type="number" id="bonus" class="w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-emerald-500 focus:border-transparent transition-all" >
                        <span class="absolute right-4 top-1/2 -translate-y-1/2 text-gray-400">บาท</span>
                    </div>
                </div>
                
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">รายได้อื่นๆ (ต่อปี)</label>
                    <div class="relative">
                        <input type="number" id="otherIncome" class="w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-emerald-500 focus:border-transparent transition-all" >
                        <span class="absolute right-4 top-1/2 -translate-y-1/2 text-gray-400">บาท</span>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Deductions Section Card -->
        <div class="deduction-card bg-white rounded-3xl shadow-lg p-6 lg:p-8 mb-6">
            <h2 class="text-lg font-semibold text-emerald-600 mb-4">รายการลดหย่อน</h2>
            
            <div class="grid grid-cols-1 lg:grid-cols-3 gap-4">
                <!-- Expense Deduction -->
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">หักค่าใช้จ่าย</label>
                    <div class="relative">
                        <input type="number" id="expenseDeduction" value="100000" class="w-full px-4 py-3 border border-gray-200 rounded-xl bg-gray-50" readonly>
                        <span class="absolute right-4 top-1/2 -translate-y-1/2 text-gray-400">บาท</span>
                    </div>
                </div>
                
                <!-- Personal Deduction -->
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">ค่าลดหย่อนส่วนตัว</label>
                    <div class="relative">
                        <input type="number" id="personalDeduction" value="60000" class="w-full px-4 py-3 border border-gray-200 rounded-xl bg-gray-50" readonly>
                        <span class="absolute right-4 top-1/2 -translate-y-1/2 text-gray-400">บาท</span>
                    </div>
                </div>
                
                <!-- Social Security Contribution -->
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">เงินสมทบประกันสังคม</label>
                    <div class="relative">
                        <input type="number" id="socialSecurityContribution" value="10500" class="w-full px-4 py-3 border border-gray-200 rounded-xl bg-gray-50" readonly>
                        <span class="absolute right-4 top-1/2 -translate-y-1/2 text-gray-400">บาท</span>
                    </div>
                </div>
            </div>
            
            <div class="space-y-4 mt-4">
                <!-- Marital Status -->
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">สถานภาพ</label>
                    <select id="maritalStatus" class="w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-emerald-500 focus:border-transparent transition-all" onchange="updateSpouseDeduction()">
                        <option value="single">โสด</option>
                        <option value="divorced">หย่า</option>
                        <option value="married_income">คู่สมรส มีเงินได้</option>
                        <option value="married_no_income">คู่สมรส ไม่มีเงินได้</option>
                    </select>
                </div>
                
                <!-- Spouse Deduction (hidden by default) -->
                <div id="spouseDeductionDiv" class="hidden">
                    <label class="block text-sm font-medium text-gray-700 mb-2">ค่าลดหย่อนคู่สมรส</label>
                    <div class="relative">
                        <input type="number" id="spouseDeduction" value="60000" class="w-full px-4 py-3 border border-gray-200 rounded-xl bg-gray-50" readonly>
                        <span class="absolute right-4 top-1/2 -translate-y-1/2 text-gray-400">บาท</span>
                    </div>
                </div>
                
                <!-- Pregnancy and Childbirth Deduction -->
                <div>
                    <label class="flex items-center gap-1 text-sm font-medium text-gray-700 mb-2">
                        ค่าลดหย่อนฝากครรภ์และคลอดบุตร
                        <span class="relative group cursor-help">
                            <svg class="w-4 h-4 text-gray-400" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"/></svg>
                            <span class="absolute left-1/2 -translate-x-1/2 bottom-full mb-2 px-3 py-1.5 bg-gray-800 text-white text-xs rounded-lg opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap z-10">สูงสุด 60,000 บาท ต่อการตั้งครรภ์</span>
                        </span>
                    </label>
                    <div class="relative">
                        <input type="number" id="pregnancyDeduction" class="w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-emerald-500 focus:border-transparent transition-all"  max="60000">
                        <span class="absolute right-4 top-1/2 -translate-y-1/2 text-gray-400">บาท</span>
                    </div>
                </div>
                
                <!-- Child Deduction -->
                <div>
                    <label class="flex items-center gap-1 text-sm font-medium text-gray-700 mb-2">
                        ค่าลดหย่อนบุตร
                        <span class="relative group cursor-help">
                            <svg class="w-4 h-4 text-gray-400" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"/></svg>
                            <span class="absolute left-1/2 -translate-x-1/2 bottom-full mb-2 px-3 py-1.5 bg-gray-800 text-white text-xs rounded-lg opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap z-10">คนละ 30,000 บาท</span>
                        </span>
                    </label>
                    <div class="flex items-center gap-3">
                        <div class="relative flex-1">
                            <input type="number" id="childCount" class="w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-emerald-500 focus:border-transparent transition-all"  min="0" onchange="updateChildDeduction()">
                            <span class="absolute right-4 top-1/2 -translate-y-1/2 text-gray-400">คน</span>
                        </div>
                        <div class="relative flex-1">
                            <input type="number" id="childDeduction" class="w-full px-4 py-3 border border-gray-200 rounded-xl bg-gray-50" readonly>
                            <span class="absolute right-4 top-1/2 -translate-y-1/2 text-gray-400">บาท</span>
                        </div>
                    </div>
                </div>
                
                <!-- Child Born from 2561 Deduction -->
                <div>
                    <label class="flex items-center gap-1 text-sm font-medium text-gray-700 mb-2">
                        บุตรคนที่ 2 เป็นต้นไปที่เกิดตั้งแต่ปี 2561
                        <span class="relative group cursor-help">
                            <svg class="w-4 h-4 text-gray-400" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"/></svg>
                            <span class="absolute left-1/2 -translate-x-1/2 bottom-full mb-2 px-3 py-1.5 bg-gray-800 text-white text-xs rounded-lg opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap z-10">ลดหย่อนได้คนละ 60,000 บาท</span>
                        </span>
                    </label>
                    <div class="flex items-center gap-3">
                        <div class="relative flex-1">
                            <input type="number" id="child2561Count" class="w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-emerald-500 focus:border-transparent transition-all"  min="0" onchange="updateChild2561Deduction()">
                            <span class="absolute right-4 top-1/2 -translate-y-1/2 text-gray-400">คน</span>
                        </div>
                        <div class="relative flex-1">
                            <input type="number" id="child2561Deduction" class="w-full px-4 py-3 border border-gray-200 rounded-xl bg-gray-50" readonly>
                            <span class="absolute right-4 top-1/2 -translate-y-1/2 text-gray-400">บาท</span>
                        </div>
                    </div>
                </div>
                
                <!-- Parent Deduction -->
                <div>
                    <label class="flex items-center gap-1 text-sm font-medium text-gray-700 mb-2">
                        ค่าลดหย่อนบิดา-มารดา
                        <span class="relative group cursor-help">
                            <svg class="w-4 h-4 text-gray-400" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"/></svg>
                            <span class="absolute left-1/2 -translate-x-1/2 bottom-full mb-2 px-3 py-1.5 bg-gray-800 text-white text-xs rounded-lg opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap z-10">คนละ 30,000 บาท (สูงสุด 4 คน)</span>
                        </span>
                    </label>
                    <div class="flex items-center gap-3">
                        <div class="relative flex-1">
                            <input type="number" id="parentCount" class="w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-emerald-500 focus:border-transparent transition-all"  min="0" max="4" onchange="updateParentDeduction()">
                            <span class="absolute right-4 top-1/2 -translate-y-1/2 text-gray-400">คน</span>
                        </div>
                        <div class="relative flex-1">
                            <input type="number" id="parentDeduction" class="w-full px-4 py-3 border border-gray-200 rounded-xl bg-gray-50" readonly>
                            <span class="absolute right-4 top-1/2 -translate-y-1/2 text-gray-400">บาท</span>
                        </div>
                    </div>
                </div>
                
                <!-- Disabled Person Care Deduction -->
                <div>
                    <label class="flex items-center gap-1 text-sm font-medium text-gray-700 mb-2">
                        ค่าลดหย่อน อุปการะผู้พิการ-ทุพพลภาพ
                        <span class="relative group cursor-help">
                            <svg class="w-4 h-4 text-gray-400" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"/></svg>
                            <span class="absolute left-1/2 -translate-x-1/2 bottom-full mb-2 px-3 py-1.5 bg-gray-800 text-white text-xs rounded-lg opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap z-10">คนละ 60,000 บาท</span>
                        </span>
                    </label>
                    <div class="flex items-center gap-3">
                        <div class="relative flex-1">
                            <input type="number" id="disabledCount" class="w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-emerald-500 focus:border-transparent transition-all"  min="0" onchange="updateDisabledDeduction()">
                            <span class="absolute right-4 top-1/2 -translate-y-1/2 text-gray-400">คน</span>
                        </div>
                        <div class="relative flex-1">
                            <input type="number" id="disabledDeduction" class="w-full px-4 py-3 border border-gray-200 rounded-xl bg-gray-50" readonly>
                            <span class="absolute right-4 top-1/2 -translate-y-1/2 text-gray-400">บาท</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Economic Stimulus Card -->
        <div class="deduction-card bg-white rounded-3xl shadow-lg p-6 lg:p-8 mb-6">
            <h2 class="text-lg font-semibold text-blue-600 mb-4">กลุ่มกระตุ้นเศรษฐกิจ</h2>
            
            <div class="space-y-4">
                <!-- Easy E-Receipt -->
                <div>
                    <label class="flex items-center gap-1 text-sm font-medium text-gray-700 mb-2">
                        Easy E-Receipt
                        <span class="relative group cursor-help">
                            <svg class="w-4 h-4 text-gray-400" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"/></svg>
                            <span class="absolute left-1/2 -translate-x-1/2 bottom-full mb-2 px-3 py-1.5 bg-gray-800 text-white text-xs rounded-lg opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap z-10">ไม่เกิน 50,000 บาท</span>
                        </span>
                    </label>
                    <div class="relative">
                        <input type="number" id="easyEReceipt" class="w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all"  max="50000">
                        <span class="absolute right-4 top-1/2 -translate-y-1/2 text-gray-400">บาท</span>
                    </div>
                </div>
                
                <!-- Housing Interest -->
                <div>
                    <label class="flex items-center gap-1 text-sm font-medium text-gray-700 mb-2">
                        ดอกเบี้ยที่อยู่อาศัย
                        <span class="relative group cursor-help">
                            <svg class="w-4 h-4 text-gray-400" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"/></svg>
                            <span class="absolute left-1/2 -translate-x-1/2 bottom-full mb-2 px-3 py-1.5 bg-gray-800 text-white text-xs rounded-lg opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap z-10">ไม่เกิน 100,000 บาท</span>
                        </span>
                    </label>
                    <div class="relative">
                        <input type="number" id="housingInterest" class="w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all"  max="100000">
                        <span class="absolute right-4 top-1/2 -translate-y-1/2 text-gray-400">บาท</span>
                    </div>
                </div>
                
                <!-- New Home Construction 2567-2568 -->
                <div>
                    <label class="flex items-center gap-1 text-sm font-medium text-gray-700 mb-2">
                        ค่าสร้างบ้านใหม่ 2567 - 2568
                        <span class="relative group cursor-help">
                            <svg class="w-4 h-4 text-gray-400" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"/></svg>
                            <span class="absolute left-1/2 -translate-x-1/2 bottom-full mb-2 px-3 py-1.5 bg-gray-800 text-white text-xs rounded-lg opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap z-10">ไม่เกิน 100,000 บาท</span>
                        </span>
                    </label>
                    <div class="relative">
                        <input type="number" id="newHomeConstruction" class="w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all"  max="100000">
                        <span class="absolute right-4 top-1/2 -translate-y-1/2 text-gray-400">บาท</span>
                    </div>
                </div>
                
                <!-- Solar Cell Installation -->
                <div>
                    <label class="flex items-center gap-1 text-sm font-medium text-gray-700 mb-2">
                        ค่าติดตั้งโซล่าเซลล์สำหรับที่อยู่อาศัย
                        <span class="relative group cursor-help">
                            <svg class="w-4 h-4 text-gray-400" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"/></svg>
                            <span class="absolute left-1/2 -translate-x-1/2 bottom-full mb-2 px-3 py-1.5 bg-gray-800 text-white text-xs rounded-lg opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap z-10">ไม่เกิน 200,000 บาท</span>
                        </span>
                    </label>
                    <div class="relative">
                        <input type="number" id="solarCellInstallation" class="w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all"  max="200000">
                        <span class="absolute right-4 top-1/2 -translate-y-1/2 text-gray-400">บาท</span>
                    </div>
                </div>
                
                <!-- Visual Art Purchase -->
                <div>
                    <label class="flex items-center gap-1 text-sm font-medium text-gray-700 mb-2">
                        ค่าซื้องานศิลปะด้านทัศนศิลป์
                        <span class="relative group cursor-help">
                            <svg class="w-4 h-4 text-gray-400" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"/></svg>
                            <span class="absolute left-1/2 -translate-x-1/2 bottom-full mb-2 px-3 py-1.5 bg-gray-800 text-white text-xs rounded-lg opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap z-10">ไม่เกิน 100,000 บาท</span>
                        </span>
                    </label>
                    <div class="relative">
                        <input type="number" id="visualArtPurchase" class="w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all"  max="100000">
                        <span class="absolute right-4 top-1/2 -translate-y-1/2 text-gray-400">บาท</span>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Life Insurance Card -->
        <div class="deduction-card bg-white rounded-3xl shadow-lg p-6 lg:p-8 mb-6">
            <h2 class="text-lg font-semibold text-purple-600 mb-4">กลุ่มประกันชีวิต</h2>
            
            <div class="space-y-4">
                <!-- General Life Insurance -->
                <div>
                    <label class="flex items-center gap-1 text-sm font-medium text-gray-700 mb-2">
                        ประกันชีวิตทั่วไป/ประกันสะสมทรัพย์
                        <span class="relative group cursor-help">
                            <svg class="w-4 h-4 text-gray-400" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"/></svg>
                            <span class="absolute left-1/2 -translate-x-1/2 bottom-full mb-2 px-3 py-1.5 bg-gray-800 text-white text-xs rounded-lg opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap z-10">ไม่เกิน 100,000 บาท</span>
                        </span>
                    </label>
                    <div class="relative">
                        <input type="number" id="lifeInsurance" class="w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all"  max="100000">
                        <span class="absolute right-4 top-1/2 -translate-y-1/2 text-gray-400">บาท</span>
                    </div>
                </div>
                
                <!-- Personal Health Insurance -->
                <div>
                    <label class="flex items-center gap-1 text-sm font-medium text-gray-700 mb-2">
                        ประกันสุขภาพตัวเอง
                        <span class="relative group cursor-help">
                            <svg class="w-4 h-4 text-gray-400" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"/></svg>
                            <span class="absolute left-1/2 -translate-x-1/2 bottom-full mb-2 px-3 py-1.5 bg-gray-800 text-white text-xs rounded-lg opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap z-10">ลดหย่อนได้ 25,000 บาท (รวมประกันชีวิตไม่เกิน 100,000 บาท)</span>
                        </span>
                    </label>
                    <div class="relative">
                        <input type="number" id="healthInsurance" class="w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all"  max="25000">
                        <span class="absolute right-4 top-1/2 -translate-y-1/2 text-gray-400">บาท</span>
                    </div>
                </div>
                
                <!-- Parent Health Insurance -->
                <div>
                    <label class="flex items-center gap-1 text-sm font-medium text-gray-700 mb-2">
                        ประกันสุขภาพบิดามารดา
                        <span class="relative group cursor-help">
                            <svg class="w-4 h-4 text-gray-400" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"/></svg>
                            <span class="absolute left-1/2 -translate-x-1/2 bottom-full mb-2 px-3 py-1.5 bg-gray-800 text-white text-xs rounded-lg opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap z-10">ไม่เกิน 15,000 บาท</span>
                        </span>
                    </label>
                    <div class="relative">
                        <input type="number" id="parentHealthInsurance" class="w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all"  max="15000">
                        <span class="absolute right-4 top-1/2 -translate-y-1/2 text-gray-400">บาท</span>
                    </div>
                </div>
                
                <!-- Spouse Life Insurance -->
                <div>
                    <label class="flex items-center gap-1 text-sm font-medium text-gray-700 mb-2">
                        ประกันชีวิตคู่สมรส
                        <span class="relative group cursor-help">
                            <svg class="w-4 h-4 text-gray-400" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"/></svg>
                            <span class="absolute left-1/2 -translate-x-1/2 bottom-full mb-2 px-3 py-1.5 bg-gray-800 text-white text-xs rounded-lg opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap z-10">ไม่เกิน 10,000 บาท</span>
                        </span>
                    </label>
                    <div class="relative">
                        <input type="number" id="spouseLifeInsurance" class="w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all"  max="10000">
                        <span class="absolute right-4 top-1/2 -translate-y-1/2 text-gray-400">บาท</span>
                    </div>
                </div>
                
                <!-- Social Security -->
                <div>
                    <label class="flex items-center gap-1 text-sm font-medium text-gray-700 mb-2">
                        ประกันสังคม
                        <span class="relative group cursor-help">
                            <svg class="w-4 h-4 text-gray-400" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"/></svg>
                            <span class="absolute left-1/2 -translate-x-1/2 bottom-full mb-2 px-3 py-1.5 bg-gray-800 text-white text-xs rounded-lg opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap z-10">ไม่เกิน 9,000 บาท</span>
                        </span>
                    </label>
                    <div class="relative">
                        <input type="number" id="socialSecurity" class="w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all"  max="9000">
                        <span class="absolute right-4 top-1/2 -translate-y-1/2 text-gray-400">บาท</span>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Investment Group Card -->
        <div class="deduction-card bg-white rounded-3xl shadow-lg p-6 lg:p-8 mb-6">
            <h2 class="text-lg font-semibold text-orange-600 mb-2">กลุ่มการลงทุน</h2>
            <p class="text-xs text-orange-500 mb-4">เมื่อรวมกับประกันชีวิตแบบบำนาญแล้ว ไม่เกิน 500,000.00 บาท</p>
            
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                <!-- PVD Fund -->
                <div>
                    <label class="flex items-center gap-1 text-sm font-medium text-gray-700 mb-2">
                        กองทุน PVD, สงเคราะห์ครู
                        <span class="relative group cursor-help">
                            <svg class="w-4 h-4 text-gray-400" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"/></svg>
                            <span class="absolute left-1/2 -translate-x-1/2 bottom-full mb-2 px-3 py-1.5 bg-gray-800 text-white text-xs rounded-lg opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap z-10">ไม่เกิน 15% ของรายได้ สูงสุด 500,000 บาท</span>
                        </span>
                    </label>
                    <div class="relative">
                        <input type="number" id="pvdFund" class="w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all"  max="500000">
                        <span class="absolute right-4 top-1/2 -translate-y-1/2 text-gray-400">บาท</span>
                    </div>
                </div>
                
                <!-- GPF -->
                <div>
                    <label class="flex items-center gap-1 text-sm font-medium text-gray-700 mb-2">
                        กบข.
                        <span class="relative group cursor-help">
                            <svg class="w-4 h-4 text-gray-400" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"/></svg>
                            <span class="absolute left-1/2 -translate-x-1/2 bottom-full mb-2 px-3 py-1.5 bg-gray-800 text-white text-xs rounded-lg opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap z-10">ไม่เกิน 30% ของรายได้ สูงสุด 500,000 บาท</span>
                        </span>
                    </label>
                    <div class="relative">
                        <input type="number" id="gpfFund" class="w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all"  max="500000">
                        <span class="absolute right-4 top-1/2 -translate-y-1/2 text-gray-400">บาท</span>
                    </div>
                </div>
                
                <!-- Annuity Insurance -->
                <div>
                    <label class="flex items-center gap-1 text-sm font-medium text-gray-700 mb-2">
                        ประกันบำนาญ
                        <span class="relative group cursor-help">
                            <svg class="w-4 h-4 text-gray-400" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"/></svg>
                            <span class="absolute left-1/2 -translate-x-1/2 bottom-full mb-2 px-3 py-1.5 bg-gray-800 text-white text-xs rounded-lg opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap z-10">ไม่เกิน 15% ของรายได้ สูงสุด 200,000 บาท</span>
                        </span>
                    </label>
                    <div class="relative">
                        <input type="number" id="annuityInsurance" class="w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all"  max="200000">
                        <span class="absolute right-4 top-1/2 -translate-y-1/2 text-gray-400">บาท</span>
                    </div>
                </div>
                
                <!-- National Savings Fund -->
                <div>
                    <label class="flex items-center gap-1 text-sm font-medium text-gray-700 mb-2">
                        กองทุนการออมเงินแห่งชาติ
                        <span class="relative group cursor-help">
                            <svg class="w-4 h-4 text-gray-400" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"/></svg>
                            <span class="absolute left-1/2 -translate-x-1/2 bottom-full mb-2 px-3 py-1.5 bg-gray-800 text-white text-xs rounded-lg opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap z-10">ไม่เกิน 30,000 บาท</span>
                        </span>
                    </label>
                    <div class="relative">
                        <input type="number" id="nsfFund" class="w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all"  max="30000">
                        <span class="absolute right-4 top-1/2 -translate-y-1/2 text-gray-400">บาท</span>
                    </div>
                </div>
                
                <!-- RMF Fund -->
                <div>
                    <label class="flex items-center gap-1 text-sm font-medium text-gray-700 mb-2">
                        กองทุน RMF
                        <span class="relative group cursor-help">
                            <svg class="w-4 h-4 text-gray-400" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"/></svg>
                            <span class="absolute left-1/2 -translate-x-1/2 bottom-full mb-2 px-3 py-1.5 bg-gray-800 text-white text-xs rounded-lg opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap z-10">ไม่เกิน 30% ของรายได้ สูงสุด 500,000 บาท</span>
                        </span>
                    </label>
                    <div class="relative">
                        <input type="number" id="rmfFund" class="w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all"  max="500000">
                        <span class="absolute right-4 top-1/2 -translate-y-1/2 text-gray-400">บาท</span>
                    </div>
                </div>
                
                <!-- Social Enterprise Investment -->
                <div>
                    <label class="flex items-center gap-1 text-sm font-medium text-gray-700 mb-2">
                        เงินลงทุนธุรกิจ Social Enterprise
                        <span class="relative group cursor-help">
                            <svg class="w-4 h-4 text-gray-400" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"/></svg>
                            <span class="absolute left-1/2 -translate-x-1/2 bottom-full mb-2 px-3 py-1.5 bg-gray-800 text-white text-xs rounded-lg opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap z-10">ไม่เกิน 100,000 บาท</span>
                        </span>
                    </label>
                    <div class="relative">
                        <input type="number" id="socialEnterprise" class="w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all"  max="100000">
                        <span class="absolute right-4 top-1/2 -translate-y-1/2 text-gray-400">บาท</span>
                    </div>
                </div>
                
                <!-- ThaiESG Fund -->
                <div>
                    <label class="flex items-center gap-1 text-sm font-medium text-gray-700 mb-2">
                        กองทุน ThaiESG
                        <span class="relative group cursor-help">
                            <svg class="w-4 h-4 text-gray-400" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"/></svg>
                            <span class="absolute left-1/2 -translate-x-1/2 bottom-full mb-2 px-3 py-1.5 bg-gray-800 text-white text-xs rounded-lg opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap z-10">ไม่เกิน 30% ของรายได้ สูงสุด 300,000 บาท</span>
                        </span>
                    </label>
                    <div class="relative">
                        <input type="number" id="thaiEsgFund" class="w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all"  max="300000">
                        <span class="absolute right-4 top-1/2 -translate-y-1/2 text-gray-400">บาท</span>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Donation Group Card -->
        <div class="deduction-card bg-white rounded-3xl shadow-lg p-6 lg:p-8 mb-6">
            <h2 class="text-lg font-semibold text-pink-600 mb-4">กลุ่มเงินบริจาค</h2>
            
            <div class="space-y-4">
                <!-- Political Party Donation -->
                <div>
                    <label class="flex items-center gap-1 text-sm font-medium text-gray-700 mb-2">
                        พรรคการเมือง
                        <span class="relative group cursor-help">
                            <svg class="w-4 h-4 text-gray-400" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"/></svg>
                            <span class="absolute left-1/2 -translate-x-1/2 bottom-full mb-2 px-3 py-1.5 bg-gray-800 text-white text-xs rounded-lg opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap z-10">ไม่เกิน 10,000 บาท</span>
                        </span>
                    </label>
                    <div class="relative">
                        <input type="number" id="politicalDonation" class="w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-pink-500 focus:border-transparent transition-all"  max="10000">
                        <span class="absolute right-4 top-1/2 -translate-y-1/2 text-gray-400">บาท</span>
                    </div>
                </div>
                
                <!-- Education/Sports/Hospital Donation -->
                <div>
                    <label class="flex items-center gap-1 text-sm font-medium text-gray-700 mb-2">
                        การศึกษา กีฬา พัฒนาสังคม โรงพยาบาลรัฐ
                        <span class="relative group cursor-help">
                            <svg class="w-4 h-4 text-gray-400" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"/></svg>
                            <span class="absolute left-1/2 -translate-x-1/2 bottom-full mb-2 px-3 py-1.5 bg-gray-800 text-white text-xs rounded-lg opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap z-10">ไม่เกิน 10% ของรายได้หลังหักค่าลดหย่อน (2 เท่า)</span>
                        </span>
                    </label>
                    <div class="flex items-center gap-3">
                        <div class="relative flex-1">
                            <input type="number" id="educationDonation" class="w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-pink-500 focus:border-transparent transition-all"  onchange="updateEducationDeduction()">
                            <span class="absolute right-4 top-1/2 -translate-y-1/2 text-gray-400">บาท</span>
                        </div>
                        <div class="relative flex-1">
                            <input type="number" id="educationDeductionAmount" class="w-full px-4 py-3 border border-gray-200 rounded-xl bg-gray-50" readonly>
                            <span class="absolute right-4 top-1/2 -translate-y-1/2 text-gray-400">บาท</span>
                        </div>
                    </div>
                </div>
                
                <!-- General Donation -->
                <div>
                    <label class="flex items-center gap-1 text-sm font-medium text-gray-700 mb-2">
                        เงินบริจาคทั่วไป
                        <span class="relative group cursor-help">
                            <svg class="w-4 h-4 text-gray-400" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"/></svg>
                            <span class="absolute left-1/2 -translate-x-1/2 bottom-full mb-2 px-3 py-1.5 bg-gray-800 text-white text-xs rounded-lg opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap z-10">ไม่เกิน 10% ของรายได้หลังหักค่าลดหย่อน (ตามที่จ่ายจริง)</span>
                        </span>
                    </label>
                    <div class="flex items-center gap-3">
                        <div class="relative flex-1">
                            <input type="number" id="generalDonation" class="w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-pink-500 focus:border-transparent transition-all" >
                            <span class="absolute right-4 top-1/2 -translate-y-1/2 text-gray-400">บาท</span>
                        </div>
                        <div class="relative flex-1">
                            <input type="number" id="generalDonationAmount" class="w-full px-4 py-3 border border-gray-200 rounded-xl bg-gray-50" readonly >
                            <span class="absolute right-4 top-1/2 -translate-y-1/2 text-gray-400">บาท</span>
                        </div>
                    </div>
                </div>
                
                <!-- e-Donation -->
                <div>
                    <label class="flex items-center gap-1 text-sm font-medium text-gray-700 mb-2">
                        เงินบริจาคผ่านระบบบริจาคอิเล็กทรอนิกส์ (e-Donation)
                        <span class="relative group cursor-help">
                            <svg class="w-4 h-4 text-gray-400" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"/></svg>
                            <span class="absolute left-1/2 -translate-x-1/2 bottom-full mb-2 px-3 py-1.5 bg-gray-800 text-white text-xs rounded-lg opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap z-10">ลดหย่อนได้ 2 เท่าของเงินบริจาค</span>
                        </span>
                    </label>
                    <div class="flex items-center gap-3">
                        <div class="relative flex-1">
                            <input type="number" id="eDonation" class="w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-pink-500 focus:border-transparent transition-all"  onchange="updateEDonationDeduction()">
                            <span class="absolute right-4 top-1/2 -translate-y-1/2 text-gray-400">บาท</span>
                        </div>
                        <div class="relative flex-1">
                            <input type="number" id="eDonationAmount" class="w-full px-4 py-3 border border-gray-200 rounded-xl bg-gray-50" readonly>
                            <span class="absolute right-4 top-1/2 -translate-y-1/2 text-gray-400">บาท</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Calculate Button -->
        <button onclick="calculateTax()" class="w-full bg-emerald-500 hover:bg-emerald-600 text-white font-semibold py-4 rounded-xl transition-colors shadow-lg shadow-emerald-200 mb-6">
            คำนวณภาษี
        </button>
        
        <!-- Results Section Card -->
        <div id="results" class="hidden bg-white rounded-3xl shadow-lg p-6 lg:p-8">
            <h3 class="text-lg font-semibold text-gray-900 mb-4">ผลการคำนวณ</h3>
            
            <div class="space-y-3">
                <div class="flex justify-between">
                    <span class="text-gray-600">รายได้รวม</span>
                    <span id="totalIncome" class="font-medium text-gray-900">0 บาท</span>
                </div>
                <div class="flex justify-between">
                    <span class="text-gray-600">หักค่าใช้จ่าย (50%)</span>
                    <span id="expenseDeductionResult" class="font-medium text-gray-900">0 บาท</span>
                </div>
                <div class="flex justify-between">
                    <span class="text-gray-600">ค่าลดหย่อนรวม</span>
                    <span id="totalDeduction" class="font-medium text-gray-900">0 บาท</span>
                </div>
                <div class="h-px bg-emerald-200 my-2"></div>
                <div class="flex justify-between">
                    <span class="text-gray-600">เงินได้สุทธิ</span>
                    <span id="netIncome" class="font-medium text-gray-900">0 บาท</span>
                </div>
                <div class="flex justify-between text-lg pt-2">
                    <span class="font-semibold text-emerald-700">ภาษีที่ต้องชำระ</span>
                    <span id="taxAmount" class="font-bold text-emerald-600">0 บาท</span>
                </div>
            </div>
        </div>
        
    </main>
    
    <script>
        function updateSpouseDeduction() {
            const maritalStatus = document.getElementById('maritalStatus').value;
            const spouseDeductionDiv = document.getElementById('spouseDeductionDiv');
            
            if (maritalStatus === 'married_no_income') {
                spouseDeductionDiv.classList.remove('hidden');
            } else {
                spouseDeductionDiv.classList.add('hidden');
            }
        }
        
        function updateChildDeduction() {
            const count = parseInt(document.getElementById('childCount').value) || 0;
            const deduction = count * 30000;
            document.getElementById('childDeduction').value = deduction;
        }
        
        function updateChild2561Deduction() {
            const count = parseInt(document.getElementById('child2561Count').value) || 0;
            const deduction = count * 60000;
            document.getElementById('child2561Deduction').value = deduction;
        }
        
        function updateParentDeduction() {
            const count = Math.min(parseInt(document.getElementById('parentCount').value) || 0, 4);
            const deduction = count * 30000;
            document.getElementById('parentDeduction').value = deduction;
        }
        
        function updateDisabledDeduction() {
            const count = parseInt(document.getElementById('disabledCount').value) || 0;
            const deduction = count * 60000;
            document.getElementById('disabledDeduction').value = deduction;
        }
        
        function updateEducationDeduction() {
            const donation = parseFloat(document.getElementById('educationDonation').value) || 0;
            const deduction = donation * 2; // 2 times of donation
            document.getElementById('educationDeductionAmount').value = deduction;
        }
        
        function updateEDonationDeduction() {
            const donation = parseFloat(document.getElementById('eDonation').value) || 0;
            const deduction = donation * 2; // 2 times of donation
            document.getElementById('eDonationAmount').value = deduction;
        }
        
        function calculateTax() {
            // Get input values
            const salary = parseFloat(document.getElementById('salary').value) || 0;
            const bonus = parseFloat(document.getElementById('bonus').value) || 0;
            const otherIncome = parseFloat(document.getElementById('otherIncome').value) || 0;
            const expenseDeduction = 100000; // Fixed expense deduction
            const personalDeduction = 60000;
            const pregnancyDeduction = Math.min(parseFloat(document.getElementById('pregnancyDeduction').value) || 0, 60000);
            const childDeduction = parseFloat(document.getElementById('childDeduction').value) || 0;
            const child2561Deduction = parseFloat(document.getElementById('child2561Deduction').value) || 0;
            const parentDeduction = parseFloat(document.getElementById('parentDeduction').value) || 0;
            const disabledDeduction = parseFloat(document.getElementById('disabledDeduction').value) || 0;
            
            // Economic stimulus deductions
            const easyEReceipt = Math.min(parseFloat(document.getElementById('easyEReceipt').value) || 0, 50000);
            const housingInterest = Math.min(parseFloat(document.getElementById('housingInterest').value) || 0, 100000);
            const newHomeConstruction = Math.min(parseFloat(document.getElementById('newHomeConstruction').value) || 0, 100000);
            const solarCellInstallation = Math.min(parseFloat(document.getElementById('solarCellInstallation').value) || 0, 200000);
            const visualArtPurchase = Math.min(parseFloat(document.getElementById('visualArtPurchase').value) || 0, 100000);
            
            // Life insurance deductions
            const lifeInsurance = Math.min(parseFloat(document.getElementById('lifeInsurance').value) || 0, 100000);
            const healthInsurance = Math.min(parseFloat(document.getElementById('healthInsurance').value) || 0, 25000);
            const parentHealthInsurance = Math.min(parseFloat(document.getElementById('parentHealthInsurance').value) || 0, 15000);
            const spouseLifeInsurance = Math.min(parseFloat(document.getElementById('spouseLifeInsurance').value) || 0, 10000);
            const socialSecurity = Math.min(parseFloat(document.getElementById('socialSecurity').value) || 0, 9000);
            
            // Investment deductions
            const pvdFund = Math.min(parseFloat(document.getElementById('pvdFund').value) || 0, 500000);
            const gpfFund = Math.min(parseFloat(document.getElementById('gpfFund').value) || 0, 500000);
            const annuityInsurance = Math.min(parseFloat(document.getElementById('annuityInsurance').value) || 0, 200000);
            const nsfFund = Math.min(parseFloat(document.getElementById('nsfFund').value) || 0, 30000);
            const rmfFund = Math.min(parseFloat(document.getElementById('rmfFund').value) || 0, 500000);
            const socialEnterprise = Math.min(parseFloat(document.getElementById('socialEnterprise').value) || 0, 100000);
            const thaiEsgFund = Math.min(parseFloat(document.getElementById('thaiEsgFund').value) || 0, 300000);
            
            // Donation deductions
            const politicalDonation = Math.min(parseFloat(document.getElementById('politicalDonation').value) || 0, 10000);
            const educationDeductionAmount = parseFloat(document.getElementById('educationDeductionAmount').value) || 0;
            const generalDonation = parseFloat(document.getElementById('generalDonation').value) || 0;
            const eDonationAmount = parseFloat(document.getElementById('eDonationAmount').value) || 0;
            
            // Social security contribution (fixed)
            const socialSecurityContribution = 10500;
            
            // Spouse deduction (only if married with no income spouse)
            const maritalStatus = document.getElementById('maritalStatus').value;
            const spouseDeduction = (maritalStatus === 'married_no_income') ? 60000 : 0;
            
            // Calculate total income
            const totalIncome = salary + bonus + otherIncome;
            
            // Calculate basic deductions first (for donation limit calculation)
            const basicDeductions = personalDeduction + spouseDeduction + pregnancyDeduction + childDeduction + child2561Deduction + parentDeduction + disabledDeduction + easyEReceipt + housingInterest + newHomeConstruction + solarCellInstallation + visualArtPurchase + lifeInsurance + healthInsurance + parentHealthInsurance + spouseLifeInsurance + socialSecurity + socialSecurityContribution;
            
            // Combined investment deduction cap (PVD + GPF + Annuity + RMF + NSF + ThaiESG cannot exceed 500,000)
            const totalInvestmentRaw = pvdFund + gpfFund + annuityInsurance + nsfFund + rmfFund + thaiEsgFund;
            const totalInvestment = Math.min(totalInvestmentRaw, 500000) + socialEnterprise;
            
            // Calculate income after basic deductions for donation limits
            const incomeAfterBasicDeduction = Math.max(totalIncome - expenseDeduction - basicDeductions - totalInvestment - politicalDonation, 0);
            
            // Donation limits (10% of income after deductions)
            const donationLimit = incomeAfterBasicDeduction * 0.10;
            const educationDeductionCapped = Math.min(educationDeductionAmount, donationLimit);
            const generalDonationCapped = Math.min(generalDonation, donationLimit);
            const eDonationCapped = Math.min(eDonationAmount, donationLimit);
            
            const totalDeduction = basicDeductions + totalInvestment + politicalDonation + educationDeductionCapped + generalDonationCapped + eDonationCapped;
            const netIncome = Math.max(totalIncome - expenseDeduction - totalDeduction, 0);
            
            // Calculate progressive tax
            let tax = 0;
            if (netIncome > 5000000) {
                tax += (netIncome - 5000000) * 0.35;
                tax += 1050000; // Tax on first 5M
            } else if (netIncome > 2000000) {
                tax += (netIncome - 2000000) * 0.30;
                tax += 150000; // Tax on first 2M
            } else if (netIncome > 1000000) {
                tax += (netIncome - 1000000) * 0.25;
                tax += 75000; // Tax on first 1M
            } else if (netIncome > 750000) {
                tax += (netIncome - 750000) * 0.20;
                tax += 25000; // Tax on first 750K
            } else if (netIncome > 500000) {
                tax += (netIncome - 500000) * 0.15;
                tax += 10000; // Tax on first 500K
            } else if (netIncome > 300000) {
                tax += (netIncome - 300000) * 0.10;
                tax += 2500; // Tax on first 300K
            } else if (netIncome > 150000) {
                tax += (netIncome - 150000) * 0.05;
            }
            
            // Display results
            document.getElementById('totalIncome').textContent = totalIncome.toLocaleString() + ' บาท';
            document.getElementById('expenseDeductionResult').textContent = expenseDeduction.toLocaleString() + ' บาท';
            document.getElementById('totalDeduction').textContent = totalDeduction.toLocaleString() + ' บาท';
            document.getElementById('netIncome').textContent = netIncome.toLocaleString() + ' บาท';
            document.getElementById('taxAmount').textContent = tax.toLocaleString() + ' บาท';
            
            document.getElementById('results').classList.remove('hidden');
        }
    </script>

</body>
</html>
