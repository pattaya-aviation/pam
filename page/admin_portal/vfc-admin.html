<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Voice for Change Admin - PA System</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="../../../function/fonts.css">
    <style>
        /* Dropdown transition */
        .dropdown-menu {
            opacity: 0;
            transform: translateY(-10px);
            visibility: hidden;
            transition: all 0.2s ease;
        }
        .dropdown-menu.open {
            opacity: 1;
            transform: translateY(0);
            visibility: visible;
        }
        
        /* Compact inbox style */
        .inbox-compact {
            font-size: 0.875rem;
        }
        .inbox-compact .text-lg {
            font-size: 1rem;
        }
        .inbox-compact .text-sm {
            font-size: 0.75rem;
        }
        .inbox-compact .text-xs {
            font-size: 0.65rem;
        }
        .inbox-compact .px-6 {
            padding-left: 1rem;
            padding-right: 1rem;
        }
        .inbox-compact .py-4 {
            padding-top: 0.75rem;
            padding-bottom: 0.75rem;
        }
        .inbox-compact .py-3 {
            padding-top: 0.5rem;
            padding-bottom: 0.5rem;
        }
        .inbox-compact .p-6 {
            padding: 1rem;
        }
        .inbox-compact .gap-4 {
            gap: 0.75rem;
        }
        .inbox-compact .w-10 {
            width: 2rem;
            height: 2rem;
        }
        .inbox-compact .w-8 {
            width: 1.5rem;
            height: 1.5rem;
        }
        .inbox-compact .mb-4 {
            margin-bottom: 0.75rem;
        }
        
        /* Custom Scrollbar */
        .custom-scrollbar::-webkit-scrollbar {
            width: 6px;
        }
        .custom-scrollbar::-webkit-scrollbar-track {
            background: transparent;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb {
            background: #d1d5db;
            border-radius: 3px;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb:hover {
            background: #9ca3af;
        }
    </style>
    <script src="../../../function/components/admin-nav.js"></script>
</head>
<body class="bg-white min-h-screen">
    
    <!-- Admin Navigation (rendered by component) -->
    <div id="adminNavContainer" data-admin-nav="vfc"></div>
    
    <!-- Floating Navbar - Right: Search + Bell Icons -->
    <div class="fixed top-4 right-4 z-50">
        <div class="flex items-center gap-2 lg:gap-1">
            <!-- Search Button (Circle on mobile, icon only on desktop) -->
            <button onclick="toggleSearch()" class="flex items-center justify-center w-14 h-14 lg:w-10 lg:h-10 bg-white/80 lg:bg-transparent backdrop-blur-xl lg:backdrop-blur-none rounded-full border border-gray-200 lg:border-0 hover:bg-gray-50 lg:hover:bg-gray-100 transition-colors">
                <svg class="w-6 h-6 lg:w-5 lg:h-5 text-gray-700" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/>
                </svg>
            </button>
            
            <!-- Bell Button with Dropdown (Circle on mobile, icon only on desktop) -->
            <div class="relative">
                <button onclick="toggleNotifications()" class="flex items-center justify-center w-14 h-14 lg:w-10 lg:h-10 bg-white/80 lg:bg-transparent backdrop-blur-xl lg:backdrop-blur-none rounded-full border border-gray-200 lg:border-0 hover:bg-gray-50 lg:hover:bg-gray-100 transition-colors relative">
                    <svg class="w-6 h-6 lg:w-5 lg:h-5 text-gray-700" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"/>
                    </svg>
                    <!-- Notification Badge -->
                    <span id="notificationBadge" class="absolute top-3 right-3 lg:top-1 lg:right-1 w-2.5 h-2.5 bg-red-500 rounded-full"></span>
                </button>
                
                <!-- Notification Dropdown -->
                <div id="notificationDropdown" class="dropdown-menu absolute top-16 right-0 w-80 bg-white/95 backdrop-blur-xl rounded-2xl border border-gray-200 overflow-hidden">
                    <!-- Header -->
                    <div class="px-4 py-3 border-b border-gray-100 flex items-center justify-between">
                        <h3 class="font-semibold text-gray-900">การแจ้งเตือน</h3>
                        <button onclick="markAllRead()" class="text-xs text-blue-500 hover:text-blue-600">อ่านทั้งหมด</button>
                    </div>
                    
                    <!-- Notification List -->
                    <div class="max-h-80 overflow-y-auto">
                        <!-- Empty State -->
                        <div class="px-4 py-8 text-center">
                            <svg class="w-12 h-12 mx-auto text-gray-300 mb-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"/>
                            </svg>
                            <p class="text-sm text-gray-500">ไม่มีการแจ้งเตือนใหม่</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Main Content -->
    <div id="mainContent" class="pt-20 lg:pt-4 px-4 lg:pl-28 lg:pr-6 min-h-screen">
        <!-- Page Title -->
        <div class="mb-6">
            <h1 class="text-2xl font-bold text-gray-900">Voice for Change</h1>
            <p class="text-gray-500 text-sm">ระบบจัดการข้อร้องเรียน ข้อเสนอแนะ และคำชม</p>
        </div>
        
        <!-- Content Area -->
        <div>
            <!-- Home Tab Content - Inbox Style -->
            <div id="contentHome" class="tab-content">
                <!-- Tab Menu Toolbar -->
                <div class="bg-white rounded-xl border-0 lg:border lg:border-gray-200 px-3 py-2 mb-3 flex items-center justify-between">
                    <div class="flex items-center gap-1">
                        <!-- Tab Buttons -->
                        <button onclick="switchTab('home')" id="tabHomeToolbar" class="flex items-center gap-1.5 px-3 py-1.5 bg-blue-500 text-white text-xs font-medium rounded-lg hover:bg-blue-600 transition-colors">
                            <svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"/>
                            </svg>
                            หน้าแรก
                        </button>
                        <button onclick="switchTab('board')" id="tabBoardToolbar" class="flex items-center gap-1.5 px-3 py-1.5 text-gray-600 text-xs font-medium rounded-lg hover:bg-gray-100 transition-colors">
                            <svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 17V7m0 10a2 2 0 01-2 2H5a2 2 0 01-2-2V7a2 2 0 012-2h2a2 2 0 012 2m0 10a2 2 0 002 2h2a2 2 0 002-2M9 7a2 2 0 012-2h2a2 2 0 012 2m0 10V7m0 10a2 2 0 002 2h2a2 2 0 002-2V7a2 2 0 00-2-2h-2a2 2 0 00-2 2"/>
                            </svg>
                            กระดาน
                        </button>
                        <button onclick="switchTab('table')" id="tabTableToolbar" class="flex items-center gap-1.5 px-3 py-1.5 text-gray-600 text-xs font-medium rounded-lg hover:bg-gray-100 transition-colors">
                            <svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 10h18M3 14h18m-9-4v8m-7 0h14a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"/>
                            </svg>
                            ตาราง
                        </button>
                    </div>
                </div>
                
                <div class="flex gap-4 h-[calc(100vh-160px)] inbox-compact -mx-4 lg:mx-0">
                    <!-- Left Panel - Message List -->
                    <div class="w-full lg:w-2/5 bg-white rounded-none lg:rounded-2xl border-0 lg:border lg:border-gray-200 overflow-hidden flex flex-col">
                        <!-- List Header with Filters -->
                        <div class="px-4 py-3 border-b border-gray-100">
                            <div class="flex items-center justify-between mb-3">
                                <div class="flex items-center gap-2">
                                    <span class="text-sm font-medium text-gray-700">ทั้งหมด</span>
                                    <span class="px-2 py-0.5 bg-blue-100 text-blue-600 text-xs rounded-full">24</span>
                                </div>
                                <div class="flex items-center gap-2">
                                    <!-- Filter Button with Dropdown -->
                                    <div class="relative">
                                        <button onclick="toggleFilterDropdown()" class="p-1.5 hover:bg-gray-100 rounded-lg transition-colors" title="กรอง">
                                            <svg class="w-4 h-4 text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"/>
                                            </svg>
                                        </button>
                                        <!-- Filter Dropdown Menu -->
                                        <div id="filterDropdown" class="hidden absolute right-0 top-full mt-1 w-44 bg-white rounded-xl border border-gray-200 shadow-lg z-50 py-1">
                                            <button onclick="setFilter('all')" class="w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-50 flex items-center gap-2">
                                                <svg class="w-4 h-4 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"/>
                                                </svg>
                                                ข้อความทั้งหมด
                                            </button>
                                            <button onclick="setFilter('unread')" class="w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-50 flex items-center gap-2">
                                                <svg class="w-4 h-4 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 19v-8.93a2 2 0 01.89-1.664l7-4.666a2 2 0 012.22 0l7 4.666A2 2 0 0121 10.07V19M3 19a2 2 0 002 2h14a2 2 0 002-2M3 19l6.75-4.5M21 19l-6.75-4.5M3 10l6.75 4.5M21 10l-6.75 4.5m0 0l-1.14.76a2 2 0 01-2.22 0l-1.14-.76"/>
                                                </svg>
                                                ยังไม่ได้อ่าน
                                            </button>
                                            <button onclick="setFilter('pinned')" class="w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-50 flex items-center gap-2">
                                                <svg class="w-4 h-4 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 5a2 2 0 012-2h10a2 2 0 012 2v16l-7-3.5L5 21V5z"/>
                                                </svg>
                                                ปักมุด
                                            </button>
                                            <div class="border-t border-gray-100 my-1"></div>
                                            <button onclick="setFilter('nostatus')" class="w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-50 flex items-center gap-2">
                                                <svg class="w-4 h-4 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
                                                </svg>
                                                ยังไม่เลือกสถานะ
                                            </button>
                                        </div>
                                    </div>
                                    <button class="p-1.5 hover:bg-gray-100 rounded-lg transition-colors" title="รีเฟรช">
                                        <svg class="w-4 h-4 text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"/>
                                        </svg>
                                    </button>
                                </div>
                            </div>
                            <!-- Filter Pills -->
                            <div class="flex items-center gap-2 overflow-x-auto pb-1">
                                <button class="px-3 py-1.5 bg-blue-500 text-white text-xs font-medium rounded-full whitespace-nowrap">ทั้งหมด</button>
                                <button class="px-3 py-1.5 bg-gray-100 text-gray-600 text-xs font-medium rounded-full hover:bg-gray-200 whitespace-nowrap">ร้องเรียน</button>
                                <button class="px-3 py-1.5 bg-gray-100 text-gray-600 text-xs font-medium rounded-full hover:bg-gray-200 whitespace-nowrap">เสนอแนะ</button>
                                <button class="px-3 py-1.5 bg-gray-100 text-gray-600 text-xs font-medium rounded-full hover:bg-gray-200 whitespace-nowrap">คำชม</button>
                            </div>
                        </div>
                        
                        <!-- Message List -->
                        <div class="flex-1 overflow-y-auto custom-scrollbar">
                            <!-- Message Item 1 - Active (ร้องเรียน) -->
                            <div class="message-item px-4 py-3 border-b border-gray-50 cursor-pointer bg-blue-50 border-l-4 border-l-red-500" onclick="selectMessage(1)">
                                <div class="flex items-start gap-3">
                                    <div class="w-10 h-10 rounded-full bg-gradient-to-br from-red-400 to-red-600 flex items-center justify-center text-white font-medium text-sm shrink-0">สป</div>
                                    <div class="flex-1 min-w-0">
                                        <div class="flex items-center justify-between mb-1">
                                            <div class="flex items-center gap-2">
                                                <span class="font-medium text-gray-900 text-sm">ไม่ระบุตัวตน</span>
                                                <span class="px-1.5 py-0.5 bg-red-100 text-red-600 text-[10px] rounded-full">ร้องเรียน</span>
                                            </div>
                                            <span class="text-xs text-gray-400">03/02/2569</span>
                                        </div>
                                        <p class="text-sm text-gray-700 font-medium truncate">สภาพแวดล้อมในการทำงานไม่เหมาะสม</p>
                                        <p class="text-xs text-gray-500 truncate mt-0.5">ห้องน้ำสกปรก ไม่มีคนทำความสะอาด...</p>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Message Item 2 (เสนอแนะ) -->
                            <div class="message-item px-4 py-3 border-b border-gray-50 cursor-pointer hover:bg-gray-50 transition-colors" onclick="selectMessage(2)">
                                <div class="flex items-start gap-3">
                                    <div class="w-10 h-10 rounded-full bg-gradient-to-br from-yellow-400 to-yellow-600 flex items-center justify-center text-white font-medium text-sm shrink-0">PH</div>
                                    <div class="flex-1 min-w-0">
                                        <div class="flex items-center justify-between mb-1">
                                            <div class="flex items-center gap-2">
                                                <span class="font-medium text-gray-900 text-sm">Pakin H. (HDQ)</span>
                                                <span class="px-1.5 py-0.5 bg-yellow-100 text-yellow-700 text-[10px] rounded-full">เสนอแนะ</span>
                                            </div>
                                            <span class="text-xs text-gray-400">02/02/2569</span>
                                        </div>
                                        <p class="text-sm text-gray-600 truncate">เสนอแนะการปรับปรุงระบบลางาน</p>
                                        <p class="text-xs text-gray-500 truncate mt-0.5">อยากให้มีระบบลางานผ่าน App...</p>
                                    </div>
                                    <div class="w-2 h-2 bg-blue-500 rounded-full shrink-0 mt-2"></div>
                                </div>
                            </div>
                            
                            <!-- Message Item 3 (คำชม) -->
                            <div class="message-item px-4 py-3 border-b border-gray-50 cursor-pointer hover:bg-gray-50 transition-colors" onclick="selectMessage(3)">
                                <div class="flex items-start gap-3">
                                    <div class="w-10 h-10 rounded-full bg-gradient-to-br from-green-400 to-green-600 flex items-center justify-center text-white font-medium text-sm shrink-0">ST</div>
                                    <div class="flex-1 min-w-0">
                                        <div class="flex items-center justify-between mb-1">
                                            <div class="flex items-center gap-2">
                                                <span class="font-medium text-gray-900 text-sm">Somchai T. (BKK)</span>
                                                <span class="px-1.5 py-0.5 bg-green-100 text-green-700 text-[10px] rounded-full">คำชม</span>
                                            </div>
                                            <span class="text-xs text-gray-400">01/02/2569</span>
                                        </div>
                                        <p class="text-sm text-gray-600 truncate">ชมเชยพนักงาน Check-in Counter</p>
                                        <p class="text-xs text-gray-500 truncate mt-0.5">พี่แอน GA ให้บริการดีมาก...</p>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Message Item 4 (ร้องเรียน) -->
                            <div class="message-item px-4 py-3 border-b border-gray-50 cursor-pointer hover:bg-gray-50 transition-colors" onclick="selectMessage(4)">
                                <div class="flex items-start gap-3">
                                    <div class="w-10 h-10 rounded-full bg-gradient-to-br from-red-400 to-red-600 flex items-center justify-center text-white font-medium text-sm shrink-0">NW</div>
                                    <div class="flex-1 min-w-0">
                                        <div class="flex items-center justify-between mb-1">
                                            <div class="flex items-center gap-2">
                                                <span class="font-medium text-gray-900 text-sm">Napat W. (CNX)</span>
                                                <span class="px-1.5 py-0.5 bg-red-100 text-red-600 text-[10px] rounded-full">ร้องเรียน</span>
                                            </div>
                                            <span class="text-xs text-gray-400">31/01/2569</span>
                                        </div>
                                        <p class="text-sm text-gray-600 truncate">หัวหน้างานพูดจาไม่เหมาะสม</p>
                                        <p class="text-xs text-gray-500 truncate mt-0.5">ขอร้องเรียนหัวหน้าแผนก GF...</p>
                                    </div>
                                    <div class="w-2 h-2 bg-blue-500 rounded-full shrink-0 mt-2"></div>
                                </div>
                            </div>
                            
                            <!-- Message Item 5 (เสนอแนะ) -->
                            <div class="message-item px-4 py-3 border-b border-gray-50 cursor-pointer hover:bg-gray-50 transition-colors" onclick="selectMessage(5)">
                                <div class="flex items-start gap-3">
                                    <div class="w-10 h-10 rounded-full bg-gradient-to-br from-yellow-400 to-yellow-600 flex items-center justify-center text-white font-medium text-sm shrink-0">WK</div>
                                    <div class="flex-1 min-w-0">
                                        <div class="flex items-center justify-between mb-1">
                                            <div class="flex items-center gap-2">
                                                <span class="font-medium text-gray-900 text-sm">Wichai K. (HKT)</span>
                                                <span class="px-1.5 py-0.5 bg-yellow-100 text-yellow-700 text-[10px] rounded-full">เสนอแนะ</span>
                                            </div>
                                            <span class="text-xs text-gray-400">30/01/2569</span>
                                        </div>
                                        <p class="text-sm text-gray-600 truncate">เพิ่มอุปกรณ์ความปลอดภัย</p>
                                        <p class="text-xs text-gray-500 truncate mt-0.5">อยากให้เพิ่มเสื้อสะท้อนแสง...</p>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Message Item 6 (ร้องเรียน) -->
                            <div class="message-item px-4 py-3 border-b border-gray-50 cursor-pointer hover:bg-gray-50 transition-colors" onclick="selectMessage(6)">
                                <div class="flex items-start gap-3">
                                    <div class="w-10 h-10 rounded-full bg-gradient-to-br from-red-400 to-red-600 flex items-center justify-center text-white font-medium text-sm shrink-0">ไม</div>
                                    <div class="flex-1 min-w-0">
                                        <div class="flex items-center justify-between mb-1">
                                            <div class="flex items-center gap-2">
                                                <span class="font-medium text-gray-900 text-sm">ไม่ระบุตัวตน</span>
                                                <span class="px-1.5 py-0.5 bg-red-100 text-red-600 text-[10px] rounded-full">ร้องเรียน</span>
                                            </div>
                                            <span class="text-xs text-gray-400">29/01/2569</span>
                                        </div>
                                        <p class="text-sm text-gray-600 truncate">เครื่องปรับอากาศเสีย</p>
                                        <p class="text-xs text-gray-500 truncate mt-0.5">แจ้งซ่อมแล้วแต่ไม่มาดำเนินการ...</p>
                                    </div>
                                    <div class="w-2 h-2 bg-blue-500 rounded-full shrink-0 mt-2"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Right Panel - Message Detail -->
                    <div id="messageDetailPanel" class="hidden lg:flex lg:w-3/5 bg-white rounded-2xl border border-gray-200 overflow-hidden flex-col">
                        <!-- Detail Action Bar -->
                        <div class="px-6 py-3 border-b border-gray-100 flex items-center justify-between bg-gray-50/50">
                            <div class="flex items-center gap-2">
                                <button class="p-2 hover:bg-gray-200 rounded-lg transition-colors" title="ย้อนกลับ">
                                    <svg class="w-4 h-4 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/>
                                    </svg>
                                </button>
                                <button class="p-2 hover:bg-gray-200 rounded-lg transition-colors" title="ถัดไป">
                                    <svg class="w-4 h-4 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
                                    </svg>
                                </button>
                                <span class="text-xs text-gray-500 ml-2">1 / 24</span>
                            </div>
                            <div class="flex items-center gap-2">
                                <button class="p-2 hover:bg-gray-200 rounded-lg transition-colors" title="พิมพ์">
                                    <svg class="w-4 h-4 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"/>
                                    </svg>
                                </button>
                                <button class="p-2 hover:bg-gray-200 rounded-lg transition-colors" title="ดาวน์โหลด">
                                    <svg class="w-4 h-4 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"/>
                                    </svg>
                                </button>
                                <button class="p-2 hover:bg-gray-200 rounded-lg transition-colors" title="ลบ">
                                    <svg class="w-4 h-4 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"/>
                                    </svg>
                                </button>
                                <button class="p-2 hover:bg-gray-200 rounded-lg transition-colors" title="เพิ่มเติม">
                                    <svg class="w-4 h-4 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z"/>
                                    </svg>
                                </button>
                            </div>
                        </div>
                        
                        <!-- Detail Header -->
                        <div class="px-6 py-4 border-b border-gray-100">
                            <div class="flex items-center justify-between mb-3">
                                <h2 class="text-lg font-semibold text-gray-900">สภาพแวดล้อมในการทำงานไม่เหมาะสม</h2>
                                <span class="px-3 py-1 bg-red-100 text-red-700 text-xs font-medium rounded-full">ร้องเรียน</span>
                            </div>
                            <div class="flex items-center gap-4 text-sm text-gray-500">
                                <div class="flex items-center gap-2">
                                    <div class="w-8 h-8 rounded-full bg-gradient-to-br from-red-400 to-red-600 flex items-center justify-center text-white font-medium text-xs">สป</div>
                                    <div>
                                        <span class="text-gray-900 font-medium">ไม่ระบุตัวตน</span>
                                    </div>
                                </div>
                                <span class="text-gray-400">03/02/2569 14:32</span>
                            </div>
                        </div>
                        
                        <!-- Detail Content -->
                        <div class="flex-1 overflow-y-auto custom-scrollbar p-6">
                            <!-- Info Cards -->
                            <div class="grid grid-cols-2 md:grid-cols-4 gap-3 mb-6">
                                <div class="bg-gray-50 rounded-xl p-3">
                                    <p class="text-xs text-gray-500 mb-1">สถานีที่ร้องเรียน</p>
                                    <p class="text-sm font-medium text-gray-900">สถานีสุวรรณภูมิ (BKK)</p>
                                </div>
                                <div class="bg-gray-50 rounded-xl p-3">
                                    <p class="text-xs text-gray-500 mb-1">ฝ่าย</p>
                                    <p class="text-sm font-medium text-gray-900">ฝ่ายปฏิบัติการภาคพื้น (BG)</p>
                                </div>
                                <div class="bg-gray-50 rounded-xl p-3">
                                    <p class="text-xs text-gray-500 mb-1">แผนก</p>
                                    <p class="text-sm font-medium text-gray-900">แผนกบริการผู้โดยสารภาคพื้น (GA)</p>
                                </div>
                                <div class="bg-gray-50 rounded-xl p-3">
                                    <p class="text-xs text-gray-500 mb-1">หมวดหมู่</p>
                                    <p class="text-sm font-medium text-red-600">สภาพแวดล้อมในการทำงาน</p>
                                </div>
                            </div>
                            
                            <!-- Complaint Details -->
                            <div class="space-y-4">
                                <div>
                                    <h3 class="text-sm font-semibold text-gray-700 mb-2">รายละเอียดของเรื่องร้องเรียน</h3>
                                    <div class="bg-white border border-gray-200 rounded-xl p-4">
                                        <p class="text-gray-700 text-sm leading-relaxed">
                                            ห้องน้ำสกปรก ไม่มีคนทำความสะอาดเป็นประจำ กลิ่นเหม็นมาก ไม่มีกระดาษชำระ น้ำไม่ไหล บางห้องประตูล็อคไม่ได้ พนักงานต้องใช้ห้องน้ำของผู้โดยสารแทน ซึ่งไม่เหมาะสม และส่งผลต่อภาพลักษณ์ของบริษัท
                                            <br><br>
                                            นอกจากนี้ ห้องพักพนักงานก็มีสภาพเสื่อมโทรม เครื่องปรับอากาศเสีย ไม่ได้ซ่อม ทำให้ร้อนมากในตอนกลางวัน พนักงานไม่สามารถพักผ่อนได้อย่างเต็มที่ ส่งผลต่อประสิทธิภาพการทำงาน
                                        </p>
                                    </div>
                                </div>
                                
                                <div>
                                    <h3 class="text-sm font-semibold text-gray-700 mb-2">สิ่งที่อยากให้แก้ไข</h3>
                                    <div class="bg-white border border-gray-200 rounded-xl p-4">
                                        <p class="text-gray-700 text-sm leading-relaxed">
                                            1. จัดทำความสะอาดห้องน้ำทุก 2 ชั่วโมง<br>
                                            2. ซ่อมแซมประตูห้องน้ำที่ชำรุด<br>
                                            3. ตรวจสอบและซ่อมระบบน้ำประปา<br>
                                            4. ซ่อมเครื่องปรับอากาศห้องพักพนักงาน<br>
                                            5. เพิ่มพัดลมสำรองในกรณีฉุกเฉิน
                                        </p>
                                    </div>
                                </div>
                                
                                <!-- Attachments -->
                                <div>
                                    <h3 class="text-sm font-semibold text-gray-700 mb-2">ไฟล์แนบ</h3>
                                    <div class="flex flex-wrap gap-2">
                                        <div class="flex items-center gap-2 px-3 py-2 bg-gray-50 border border-gray-200 rounded-lg">
                                            <svg class="w-4 h-4 text-blue-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"/>
                                            </svg>
                                            <span class="text-xs text-gray-700">ห้องน้ำ_1.jpg</span>
                                        </div>
                                        <div class="flex items-center gap-2 px-3 py-2 bg-gray-50 border border-gray-200 rounded-lg">
                                            <svg class="w-4 h-4 text-blue-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"/>
                                            </svg>
                                            <span class="text-xs text-gray-700">ห้องพัก_แอร์เสีย.jpg</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Detail Footer -->
                        <div class="px-6 py-4 border-t border-gray-100 flex items-center gap-3">
                            <button class="px-4 py-2 bg-blue-500 text-white text-sm font-medium rounded-lg hover:bg-blue-600 transition-colors">ดำเนินการ</button>
                            <button class="px-4 py-2 bg-gray-100 text-gray-700 text-sm font-medium rounded-lg hover:bg-gray-200 transition-colors">ตอบกลับ</button>
                            <button class="px-4 py-2 bg-gray-100 text-gray-700 text-sm font-medium rounded-lg hover:bg-gray-200 transition-colors">ส่งต่อ</button>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Board Tab Content -->
            <div id="contentBoard" class="tab-content hidden">
                <div class="bg-white rounded-2xl border border-gray-200 p-8 text-center">
                    <div class="w-16 h-16 mx-auto mb-4 bg-purple-100 rounded-full flex items-center justify-center">
                        <svg class="w-8 h-8 text-purple-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 17V7m0 10a2 2 0 01-2 2H5a2 2 0 01-2-2V7a2 2 0 012-2h2a2 2 0 012 2m0 10a2 2 0 002 2h2a2 2 0 002-2M9 7a2 2 0 012-2h2a2 2 0 012 2m0 10V7m0 10a2 2 0 002 2h2a2 2 0 002-2V7a2 2 0 00-2-2h-2a2 2 0 00-2 2"/>
                        </svg>
                    </div>
                    <h2 class="text-xl font-semibold text-gray-900 mb-2">กระดาน</h2>
                    <p class="text-gray-500">ดูข้อมูลแบบ Kanban Board</p>
                </div>
            </div>
            
            <!-- Table Tab Content -->
            <div id="contentTable" class="tab-content hidden">
                <div class="bg-white rounded-2xl border border-gray-200 p-8 text-center">
                    <div class="w-16 h-16 mx-auto mb-4 bg-green-100 rounded-full flex items-center justify-center">
                        <svg class="w-8 h-8 text-green-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 10h18M3 14h18m-9-4v8m-7 0h14a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"/>
                        </svg>
                    </div>
                    <h2 class="text-xl font-semibold text-gray-900 mb-2">ตาราง</h2>
                    <p class="text-gray-500">ดูข้อมูลแบบตาราง</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Mobile Detail Overlay -->
    <div id="mobileDetailOverlay" class="fixed inset-0 bg-white z-[100] lg:hidden transform translate-x-full transition-transform duration-300 ease-in-out overflow-y-auto">
        <div id="mobileDetailContent" class="min-h-screen">
            <!-- Content will be injected by JavaScript -->
        </div>
    </div>

    <script>
        // Check authentication
        const user = sessionStorage.getItem('user');
        if (!user) {
            window.location.href = '../../Home/pa-system.html';
        }
        
        function logout() {
            sessionStorage.removeItem('user');
            window.location.href = '../../Home/pa-system.html';
        }
        
        // Mockup Data
        const mockupMessages = {
            1: {
                id: 1,
                type: 'complaint',
                typeThai: 'ร้องเรียน',
                typeColor: 'red',
                sender: 'ไม่ระบุตัวตน',
                senderInitials: 'สป',
                date: '03/02/2569 14:32',
                title: 'สภาพแวดล้อมในการทำงานไม่เหมาะสม',
                station: 'สถานีสุวรรณภูมิ (BKK)',
                department: 'ฝ่ายปฏิบัติการภาคพื้น (BG)',
                section: 'แผนกบริการผู้โดยสารภาคพื้น (GA)',
                category: 'สภาพแวดล้อมในการทำงาน',
                detail: 'ห้องน้ำสกปรก ไม่มีคนทำความสะอาดเป็นประจำ กลิ่นแรงมาก ไม่มีกระดาษชำระ น้ำไม่ไหล บางห้องประตูล็อคไม่ได้ พนักงานต้องใช้ห้องน้ำของผู้โดยสารแทน ซึ่งไม่เหมาะสม และส่งผลต่อภาพลักษณ์ของบริษัท\n\nนอกจากนี้ ห้องพักพนักงานมีสภาพเสื่อมโทรม เครื่องปรับอากาศเสีย ไม่มีคนซ่อม ทำให้ร้อนมากในตอนกลางวัน พนักงานไม่สามารถพักผ่อนได้อย่างเต็มที่ส่งผลต่อประสิทธิภาพการทำงาน',
                resolution: '1. จัดทำความสะอาดห้องน้ำทุก 2 ชั่วโมง\n2. ติดตั้งกล่องใส่กระดาษชำระเพิ่ม\n3. ซ่อมแซมประตูห้องน้ำ\n4. ซ่อมเครื่องปรับอากาศห้องพักพนักงาน',
                status: 'pending'
            },
            2: {
                id: 2,
                type: 'suggestion',
                typeThai: 'เสนอแนะ',
                typeColor: 'yellow',
                sender: 'Pakin H. (HDQ)',
                senderInitials: 'PH',
                date: '02/02/2569 10:15',
                title: 'เสนอแนะการปรับปรุงระบบลางาน',
                station: 'สำนักงานใหญ่ (HDQ)',
                department: 'ฝ่ายทรัพยากรบุคคล (BH)',
                section: 'แผนกบริหารงานบุคคล (HA)',
                category: 'ระบบการทำงาน',
                detail: 'อยากให้มีระบบลางานผ่าน App เพราะปัจจุบันต้องกรอกแบบฟอร์มกระดาษ ซึ่งทำให้เสียเวลา และบางครั้งเอกสารหาย หากมี App จะสะดวกมากขึ้น สามารถลาได้ทุกที่ทุกเวลา และหัวหน้าสามารถอนุมัติได้ทันที\n\nนอกจากนี้ควรมีการแจ้งเตือนผ่าน Line หรือ Email เมื่อใบลาได้รับการอนุมัติ',
                resolution: '',
                status: 'unread'
            },
            3: {
                id: 3,
                type: 'compliment',
                typeThai: 'คำชม',
                typeColor: 'green',
                sender: 'Somchai T. (BKK)',
                senderInitials: 'ST',
                date: '01/02/2569 16:45',
                title: 'ชมเชยพนักงาน Check-in Counter',
                station: 'สถานีสุวรรณภูมิ (BKK)',
                department: 'ฝ่ายปฏิบัติการภาคพื้น (BG)',
                section: 'แผนกบริการผู้โดยสารภาคพื้น (GA)',
                category: 'การให้บริการ',
                detail: 'พี่แอน GA ให้บริการดีมาก ช่วยเหลือผู้โดยสารที่มีปัญหาบัตรโดยสารอย่างเต็มใจ ไม่หงุดหงิด และยังช่วยประสานงานกับสายการบินให้ ผู้โดยสารประทับใจมาก\n\nอยากให้บริษัทยกย่องพนักงานท่านนี้เป็นแบบอย่างให้พนักงานคนอื่นๆ',
                resolution: '',
                status: 'read'
            },
            4: {
                id: 4,
                type: 'complaint',
                typeThai: 'ร้องเรียน',
                typeColor: 'red',
                sender: 'Napat W. (CNX)',
                senderInitials: 'NW',
                date: '31/01/2569 09:30',
                title: 'หัวหน้างานพูดจาไม่เหมาะสม',
                station: 'สถานีเชียงใหม่ (CNX)',
                department: 'ฝ่ายปฏิบัติการภาคพื้น (BG)',
                section: 'แผนกบริการภาคพื้น (GF)',
                category: 'พฤติกรรมไม่เหมาะสม',
                detail: 'ขอร้องเรียนหัวหน้าแผนก GF ที่มักพูดจาดุด่าพนักงานต่อหน้าผู้โดยสาร ซึ่งทำให้พนักงานอับอายและเสียกำลังใจในการทำงาน บางครั้งใช้คำพูดหยาบคาย\n\nพฤติกรรมนี้เกิดขึ้นบ่อยมาก ทำให้พนักงานหลายคนไม่กล้าถามคำถามหรือขอความช่วยเหลือ',
                resolution: '',
                status: 'unread'
            },
            5: {
                id: 5,
                type: 'suggestion',
                typeThai: 'เสนอแนะ',
                typeColor: 'yellow',
                sender: 'Wichai K. (HKT)',
                senderInitials: 'WK',
                date: '30/01/2569 14:20',
                title: 'เพิ่มอุปกรณ์ความปลอดภัย',
                station: 'สถานีภูเก็ต (HKT)',
                department: 'ฝ่ายปฏิบัติการภาคพื้น (BG)',
                section: 'แผนกบริการลานจอด (GR)',
                category: 'ความปลอดภัย',
                detail: 'อยากให้เพิ่มเสื้อสะท้อนแสงให้พนักงานลานจอด เพราะเสื้อที่มีอยู่เก่าและสีซีดมาก ในตอนกลางคืนมองเห็นยาก อาจเกิดอุบัติเหตุได้\n\nนอกจากนี้ควรเพิ่มหมวกนิรภัยและถุงมือสำหรับพนักงานที่ต้องทำงานกับสินค้า',
                resolution: '',
                status: 'read'
            },
            6: {
                id: 6,
                type: 'complaint',
                typeThai: 'ร้องเรียน',
                typeColor: 'red',
                sender: 'ไม่ระบุตัวตน',
                senderInitials: 'ไม',
                date: '29/01/2569 11:00',
                title: 'เครื่องปรับอากาศเสีย',
                station: 'สถานีดอนเมือง (DMK)',
                department: 'ฝ่ายอำนวยการ (BE)',
                section: 'แผนกธุรการ (EA)',
                category: 'สภาพแวดล้อมในการทำงาน',
                detail: 'แจ้งซ่อมเครื่องปรับอากาศไปแล้วหลายครั้ง แต่ไม่มีคนมาซ่อม ทำให้ห้องทำงานร้อนมาก พนักงานไม่สามารถทำงานได้อย่างมีประสิทธิภาพ\n\nขอให้เร่งดำเนินการซ่อมแซมโดยด่วน',
                resolution: '',
                status: 'pending'
            }
        };
        
        // Select message and update detail panel
        function selectMessage(id) {
            const message = mockupMessages[id];
            if (!message) return;
            
            // Update active state in message list
            document.querySelectorAll('.message-item').forEach(item => {
                item.classList.remove('bg-blue-50', 'border-l-4');
                item.classList.add('hover:bg-gray-50');
            });
            
            const clickedItem = document.querySelector(`.message-item[onclick="selectMessage(${id})"]`);
            if (clickedItem) {
                clickedItem.classList.add('bg-blue-50', 'border-l-4', `border-l-${message.typeColor}-500`);
                clickedItem.classList.remove('hover:bg-gray-50');
            }
            
            // Update detail panel
            const detailPanel = document.getElementById('messageDetailPanel');
            if (detailPanel) {
                const typeColorClasses = {
                    'red': 'bg-red-100 text-red-600',
                    'yellow': 'bg-yellow-100 text-yellow-700',
                    'green': 'bg-green-100 text-green-700'
                };
                
                detailPanel.innerHTML = `
                    <!-- Detail Header -->
                    <div class="px-6 py-4 border-b border-gray-100">
                        <div class="flex items-center justify-between mb-4">
                            <div class="flex items-center gap-2">
                                <button class="p-1.5 hover:bg-gray-100 rounded-lg">
                                    <svg class="w-4 h-4 text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/>
                                    </svg>
                                </button>
                                <button class="p-1.5 hover:bg-gray-100 rounded-lg">
                                    <svg class="w-4 h-4 text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
                                    </svg>
                                </button>
                                <span class="text-sm text-gray-500 ml-2">${id} / 24</span>
                            </div>
                            <div class="flex items-center gap-2">
                                <button class="p-1.5 hover:bg-gray-100 rounded-lg" title="ปักมุด">
                                    <svg class="w-4 h-4 text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 5a2 2 0 012-2h10a2 2 0 012 2v16l-7-3.5L5 21V5z"/>
                                    </svg>
                                </button>
                                <button class="p-1.5 hover:bg-gray-100 rounded-lg" title="ดาวน์โหลด">
                                    <svg class="w-4 h-4 text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"/>
                                    </svg>
                                </button>
                                <button class="p-1.5 hover:bg-gray-100 rounded-lg" title="ลบ">
                                    <svg class="w-4 h-4 text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"/>
                                    </svg>
                                </button>
                                <button class="p-1.5 hover:bg-gray-100 rounded-lg" title="เพิ่มเติม">
                                    <svg class="w-4 h-4 text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z"/>
                                    </svg>
                                </button>
                            </div>
                        </div>
                        
                        <h2 class="text-lg font-semibold text-gray-900 mb-3">${message.title}</h2>
                        
                        <div class="flex items-center justify-between">
                            <div class="flex items-center gap-3">
                                <div class="w-10 h-10 rounded-full bg-gradient-to-br from-${message.typeColor}-400 to-${message.typeColor}-600 flex items-center justify-center text-white font-medium text-sm">${message.senderInitials}</div>
                                <div>
                                    <span class="text-sm font-medium text-gray-900">${message.sender}</span>
                                    <span class="text-sm text-gray-500 ml-2">${message.date}</span>
                                </div>
                            </div>
                            <span class="px-2 py-1 ${typeColorClasses[message.typeColor]} text-xs font-medium rounded-full">${message.typeThai}</span>
                        </div>
                    </div>
                    
                    <!-- Detail Body -->
                    <div class="flex-1 overflow-y-auto p-6 custom-scrollbar">
                        <!-- Info Grid -->
                        <div class="grid grid-cols-2 lg:grid-cols-4 gap-4 mb-6 p-4 bg-gray-50 rounded-xl">
                            <div>
                                <p class="text-xs text-gray-500 mb-1">สถานีที่ร้องเรียน</p>
                                <p class="text-sm font-medium text-blue-600">${message.station}</p>
                            </div>
                            <div>
                                <p class="text-xs text-gray-500 mb-1">ฝ่าย</p>
                                <p class="text-sm font-medium text-gray-900">${message.department}</p>
                            </div>
                            <div>
                                <p class="text-xs text-gray-500 mb-1">แผนก</p>
                                <p class="text-sm font-medium text-gray-900">${message.section}</p>
                            </div>
                            <div>
                                <p class="text-xs text-gray-500 mb-1">หมวดหมู่</p>
                                <p class="text-sm font-medium text-${message.typeColor}-600">${message.category}</p>
                            </div>
                        </div>
                        
                        <!-- Content -->
                        <div class="mb-6">
                            <h3 class="text-sm font-semibold text-gray-900 mb-3">รายละเอียดของเรื่อง${message.typeThai}</h3>
                            <div class="text-sm text-gray-600 leading-relaxed whitespace-pre-line bg-white p-4 rounded-xl border border-gray-100">${message.detail}</div>
                        </div>
                        
                        ${message.resolution ? `
                        <div class="mb-6">
                            <h3 class="text-sm font-semibold text-gray-900 mb-3">สิ่งที่อยากให้แก้ไข</h3>
                            <div class="text-sm text-gray-600 leading-relaxed whitespace-pre-line bg-green-50 p-4 rounded-xl border border-green-100">${message.resolution}</div>
                        </div>
                        ` : ''}
                        
                        <!-- Action Buttons -->
                        <div class="flex items-center gap-3 pt-4">
                            <button class="px-4 py-2 bg-blue-500 text-white text-sm font-medium rounded-lg hover:bg-blue-600 transition-colors">ดำเนินการ</button>
                            <button class="px-4 py-2 bg-gray-100 text-gray-700 text-sm font-medium rounded-lg hover:bg-gray-200 transition-colors">ตอบกลับ</button>
                            <button class="px-4 py-2 bg-gray-100 text-gray-700 text-sm font-medium rounded-lg hover:bg-gray-200 transition-colors">ส่งต่อ</button>
                        </div>
                    </div>
                `;
            }
            
            // Show mobile detail overlay
            const mobileOverlay = document.getElementById('mobileDetailOverlay');
            const mobileContent = document.getElementById('mobileDetailContent');
            
            if (mobileOverlay && mobileContent && window.innerWidth < 1024) {
                const typeColorClasses = {
                    'red': 'bg-red-100 text-red-600',
                    'yellow': 'bg-yellow-100 text-yellow-700',
                    'green': 'bg-green-100 text-green-700'
                };
                
                mobileContent.innerHTML = `
                    <!-- Mobile Header -->
                    <div class="sticky top-0 bg-white border-b border-gray-100 px-4 py-3 flex items-center gap-3 z-10">
                        <button onclick="closeMobileDetail()" class="p-2 -ml-2 hover:bg-gray-100 rounded-lg transition-colors">
                            <svg class="w-5 h-5 text-gray-700" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/>
                            </svg>
                        </button>
                        <span class="text-sm font-medium text-gray-900">รายละเอียด</span>
                        <span class="px-2 py-1 ${typeColorClasses[message.typeColor]} text-xs font-medium rounded-full ml-auto">${message.typeThai}</span>
                    </div>
                    
                    <!-- Mobile Content -->
                    <div class="p-4">
                        <h2 class="text-xl font-bold text-gray-900 mb-4">${message.title}</h2>
                        
                        <!-- Sender Info -->
                        <div class="flex items-center gap-3 mb-6 pb-4 border-b border-gray-100">
                            <div class="w-12 h-12 rounded-full bg-gradient-to-br from-${message.typeColor}-400 to-${message.typeColor}-600 flex items-center justify-center text-white font-medium">${message.senderInitials}</div>
                            <div>
                                <p class="font-medium text-gray-900">${message.sender}</p>
                                <p class="text-sm text-gray-500">${message.date}</p>
                            </div>
                        </div>
                        
                        <!-- Info Cards -->
                        <div class="grid grid-cols-2 gap-3 mb-6">
                            <div class="bg-gray-50 rounded-xl p-3">
                                <p class="text-xs text-gray-500 mb-1">สถานี</p>
                                <p class="text-sm font-medium text-blue-600">${message.station}</p>
                            </div>
                            <div class="bg-gray-50 rounded-xl p-3">
                                <p class="text-xs text-gray-500 mb-1">ฝ่าย</p>
                                <p class="text-sm font-medium text-gray-900">${message.department}</p>
                            </div>
                            <div class="bg-gray-50 rounded-xl p-3">
                                <p class="text-xs text-gray-500 mb-1">แผนก</p>
                                <p class="text-sm font-medium text-gray-900">${message.section}</p>
                            </div>
                            <div class="bg-gray-50 rounded-xl p-3">
                                <p class="text-xs text-gray-500 mb-1">หมวดหมู่</p>
                                <p class="text-sm font-medium text-${message.typeColor}-600">${message.category}</p>
                            </div>
                        </div>
                        
                        <!-- Detail Content -->
                        <div class="mb-6">
                            <h3 class="text-sm font-semibold text-gray-900 mb-3">รายละเอียดของเรื่อง${message.typeThai}</h3>
                            <div class="text-sm text-gray-600 leading-relaxed whitespace-pre-line bg-white p-4 rounded-xl border border-gray-100">${message.detail}</div>
                        </div>
                        
                        ${message.resolution ? `
                        <div class="mb-6">
                            <h3 class="text-sm font-semibold text-gray-900 mb-3">สิ่งที่อยากให้แก้ไข</h3>
                            <div class="text-sm text-gray-600 leading-relaxed whitespace-pre-line bg-green-50 p-4 rounded-xl border border-green-100">${message.resolution}</div>
                        </div>
                        ` : ''}
                        
                        <!-- Action Buttons -->
                        <div class="flex flex-col gap-3 pt-4">
                            <button class="w-full px-4 py-3 bg-blue-500 text-white text-sm font-medium rounded-xl hover:bg-blue-600 transition-colors">ดำเนินการ</button>
                            <div class="flex gap-3">
                                <button class="flex-1 px-4 py-3 bg-gray-100 text-gray-700 text-sm font-medium rounded-xl hover:bg-gray-200 transition-colors">ตอบกลับ</button>
                                <button class="flex-1 px-4 py-3 bg-gray-100 text-gray-700 text-sm font-medium rounded-xl hover:bg-gray-200 transition-colors">ส่งต่อ</button>
                            </div>
                        </div>
                    </div>
                `;
                
                // Show overlay with animation
                mobileOverlay.classList.remove('translate-x-full');
                document.body.style.overflow = 'hidden';
            }
        }
        
        // Close mobile detail overlay
        function closeMobileDetail() {
            const mobileOverlay = document.getElementById('mobileDetailOverlay');
            if (mobileOverlay) {
                mobileOverlay.classList.add('translate-x-full');
                document.body.style.overflow = '';
            }
        }
        
        // Tab switching
        function switchTab(tabName) {
            // Remove active from all tabs
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.classList.remove('bg-white', 'text-gray-900', 'shadow-sm');
                btn.classList.add('text-gray-600');
            });
            
            // Hide all content
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.add('hidden');
            });
            
            // Activate selected tab
            const tabBtn = document.getElementById('tab' + tabName.charAt(0).toUpperCase() + tabName.slice(1));
            if (tabBtn) {
                tabBtn.classList.add('bg-white', 'text-gray-900', 'shadow-sm');
                tabBtn.classList.remove('text-gray-600');
            }
            
            // Show selected content
            const content = document.getElementById('content' + tabName.charAt(0).toUpperCase() + tabName.slice(1));
            if (content) {
                content.classList.remove('hidden');
            }
        }
        
        function toggleSearch() {
            // TODO: Implement search functionality
            console.log('Search clicked');
            alert('ฟังก์ชันค้นหา - Coming soon!');
        }
        
        function toggleNotifications() {
            const dropdown = document.getElementById('notificationDropdown');
            dropdown.classList.toggle('open');
        }
        
        function markAllRead() {
            // Hide the notification badge
            const badge = document.getElementById('notificationBadge');
            if (badge) badge.style.display = 'none';
        }
        
        function toggleFilterDropdown() {
            const dropdown = document.getElementById('filterDropdown');
            dropdown.classList.toggle('hidden');
        }
        
        function setFilter(filterType) {
            console.log('Filter set to:', filterType);
            // Hide dropdown
            document.getElementById('filterDropdown').classList.add('hidden');
            
            // TODO: Implement actual filtering logic
            const filterNames = {
                'all': 'ข้อความทั้งหมด',
                'unread': 'ยังไม่ได้อ่าน',
                'pinned': 'ปักมุด',
                'nostatus': 'ยังไม่เลือกสถานะ'
            };
            
            // Update header text to show current filter
            // You can customize this behavior
        }
        
        // Close dropdowns when clicking outside
        document.addEventListener('click', function(e) {
            const notifDropdown = document.getElementById('notificationDropdown');
            const notifButton = e.target.closest('button[onclick="toggleNotifications()"]');
            
            if (!notifButton && !e.target.closest('#notificationDropdown')) {
                notifDropdown.classList.remove('open');
            }
            
            // Close filter dropdown when clicking outside
            const filterDropdown = document.getElementById('filterDropdown');
            const filterButton = e.target.closest('button[onclick="toggleFilterDropdown()"]');
            
            if (!filterButton && !e.target.closest('#filterDropdown')) {
                filterDropdown.classList.add('hidden');
            }
        });
    </script>

</body>
</html>
